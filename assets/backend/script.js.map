{"version":3,"sources":["node_modules/browser-pack/_prelude.js","script.js","assets/src-backend/admin-blocks/twrpb-collapsible/twrpb-collapsible.ts","assets/src-backend/admin-blocks/twrpb-hidden/twrpb-hidden.ts","assets/src-backend/documentation-page/twrpb-documentation-page.ts","assets/src-backend/general-settings/twrpb-general-settings.ts","assets/src-backend/query-settings/twrpb-advanced-settings/twrpb-advanced-settings.ts","assets/src-backend/query-settings/twrpb-author-settings/twrpb-author-settings.ts","assets/src-backend/query-settings/twrpb-cat-settings/twrpb-cat-settings.ts","assets/src-backend/query-settings/twrpb-comments-settings/twrpb-comments-settings.ts","assets/src-backend/query-settings/twrpb-date-settings/twrpb-date-settings.ts","assets/src-backend/query-settings/twrpb-meta-setting/twrpb-meta-setting.ts","assets/src-backend/query-settings/twrpb-order-setting/twrpb-order-setting.ts","assets/src-backend/query-settings/twrpb-posts-settings/twrpb-posts-settings.ts","assets/src-backend/query-settings/twrpb-query-settings/twrpb-query-settings.ts","assets/src-backend/query-settings/twrpb-search-setting/twrpb-search-setting.ts","assets/src-backend/query-settings/twrpb-statuses-settings/twrpb-statuses-settings.ts","assets/src-backend/script.ts","assets/src-backend/widget-blocks/twrp-color-picker.ts","assets/src-backend/widget-blocks/twrp-widget-components.ts","assets/src-backend/widget-blocks/twrp-widget-form.ts","assets/src-backend/widget-blocks/twrpb-sync-widget-query-settings.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","global","__importDefault","this","mod","__esModule","default","Object","defineProperty","value","jquery_1","window","each","element","activeTabIndex","attr","accordion","active","heightStyle","collapsible","icons","self","2","showLeft","hideLeft","hideUp","showUp","toggleDisplay","horizontalAnimationRunning","horizontalAnimationQueue","addQueueAnimation","functionName","args","queueItem","name","parameters","push","nextQueueAnimation","horizontalQueueItem","pop","apply","horizontalAnimationIsRunning","makeHorizontalRunning","slideUp","duration","complete","addHideClass","slideDown","removeHideClass","addClass","removeClass","css","hasClass","remove","completeFunction","removeElement","hide","effect","direction","hideFirst","show","3","twrpb_hidden_1","document","on","spoilerWrapper","parent","find","../admin-blocks/twrpb-hidden/twrpb-hidden","4","showOrHideCustomDateFormat","humanReadableEnabledCheckbox","customDateWrapper","is","iconWrapperClassName","iconAndSvgElem","selectNames","updateIcon","selectName","selectElem","selectWrapper","iconId","String","val","insertBefore","_i","selectNames_1","documentOnClickSelector","selectNames_2","getDocumentOnClickSelector","iconsPreviewWrapperClassName","ratingIconAndSvgElem","ratingIconsSet","updateRatingIcons","dataHolderElement","toParse","JSON","parse","setRatingIconsData","selectedRatingPack","emptyIconId","empty","halfFilledIconId","half","filledIconId","full","prepend","iconsWrapperPreviewElement","appendTo","selectCommentIconSelector","selectDisabledCommentIconSelector","compatibleDisabledComments","autoSelectIconSwitchName","doDisabledCommentIconAutoSelect","setCommentsData","commentId","compatibleDisabledCommentIconId","trigger","enableOrDisableIconSelect","isEnableAutoSelect","enableIconSelector","firstTime","prop","parseInt","removeProp","5","codeMirrorInstance","getElementById","CodeMirror","fromTextArea","mode","theme","indentUnit","indentWithTabs","lineNumbers","autoRefresh","applySettingSelector","settingWrapperSelector","hideOrShowSetting","warningSelector","showOrHideJSONInvalidWarning","textareaJSON","getValue","jsonString","isValidJSON","../../admin-blocks/twrpb-hidden/twrpb-hidden","6","authorTypeSelector","authorSearchWrap","authorToHideList","authorTypeVal","authorSearchInput","autocomplete","source","showSearchedUsers","minLength","request","sendToControl","allUsers","wp","api","collections","Users","usersFound","updateCategories","name_1","id","html","models","attributes","text","error","label","fetch","data","_fields","search","term","once","console","authorsIdsInput","authorsVisualList","ariaLabelDataAttr","authorVisualItem","authorIdAttrName","addAuthor","authorExistInVisualList","newAuthorItem","clone","removeBtnAriaLabel","ariaLabel","getRemoveButtonAriaLabel","replace","append","_addAuthorToVisualList","inputVal","Number","split","map","mapToInt","indexOf","authorExistInHiddenInput","previousVal","newVal","_addAuthorToHiddenInput","removeOrAddNoAuthorsText","autocompleteInstance","selectedItem","event","keyCode","which","preventDefault","closest","itemToRemove","removeAttr","_removeAuthorFromVisualList","currentValue","authorsIds","indexOfId","splice","join","_removeAuthorFromHiddenInput","removeAuthor","noAuthorsText","updateAuthorsIdsFromVisualList","authorItems","itemId","sortable","placeholder","stop","7","categorySelector","categoriesInput","categoryIdAttrName","categoriesItemsWrapper","categoriesEmptyMessage","categoryItem","hideOrShowEmptyMessage","categoryId","sanitizeCategoryName","newValue","oldValue","categoryIdInsertedInInput","addCatToInput","items","sameIdFound","categoryItemIsDisplayed","toAppend","removeButtonAriaLabel","addCatToVisual","toRemove","removeCategoryFromDisplay","categoryIds","toRemoveCategoryIndex","removeCategoryFromInput","refreshInputtedCategories","categoryTypeSelect","categoryRelationWrapper","mainCategorySettings","trim","categoriesItems","categoriesIds","catId","selectVal","setTimeout","8","selectCommentsComparator","numCommentsInput","hideOrShowCommentsNumberInput","9","after","before","input","createElement","notADateValue","setAttribute","options","dateFormat","changeMonth","changeYear","beforeShow","datepicker","selectDateType","lastPeriodWrapper","betweenPeriodWrapper","hideOrShowLastPeriodSettings","hideOrShowBetweenTimeSettings","numberOfDaysNoteSelector","hideOrShowUncheckedRadioNote","10","metaTypeSelector","metaValueSelector","showOrHideValueInput","metaTypeValue","settingIsAppliedSelector","hideOrShowMetaSetting","11","firstOrderGroup","secondOrderGroup","thirdOrderGroup","orderByClassName","orderGroups","hideOrShowUnnecessarySelectors","hideNext","hideOrShowSelectedValues","selectedVal","j","orderBySelect","nextSelectedVal","postIdOrderWarning","hideOrShowWarning","showWarning","12","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","y","g","_","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","postTypeSelect","postVisualList","searchingWrapper","includeNote","hideOrShowVisualList","postsTypeVal","postsSearchInput","showSearchedPosts","wpApiURL","fetchUrl","posts","postsToSend","_a","wpApiSettings","root","versionString","json","Array","decodeHtml","title","postsIdsInput","postIdAttrName","postVisualItem","addPost","postExistInVisualList","removeButtonLabel","_addPostToVisualList","postExistInHiddenInput","_addPostToHiddenInput","removeOrAddNoPostsText","_removePostFromVisualList","postsIds","_removePostFromHiddenInput","removePost","noPostsText","updatePostsIdsFromVisualList","postItems","filter","13","alertMessage","confirm","14","searchInput","warningWrapper","hiderOrShowSearchWarning","searchStringLength","15","applySettingSelect","postStatuses","hideOrShowPostStatuses","16","./admin-blocks/twrpb-collapsible/twrpb-collapsible","./admin-blocks/twrpb-hidden/twrpb-hidden","./documentation-page/twrpb-documentation-page","./general-settings/twrpb-general-settings","./query-settings/twrpb-advanced-settings/twrpb-advanced-settings","./query-settings/twrpb-author-settings/twrpb-author-settings","./query-settings/twrpb-cat-settings/twrpb-cat-settings","./query-settings/twrpb-comments-settings/twrpb-comments-settings","./query-settings/twrpb-date-settings/twrpb-date-settings","./query-settings/twrpb-meta-setting/twrpb-meta-setting","./query-settings/twrpb-order-setting/twrpb-order-setting","./query-settings/twrpb-posts-settings/twrpb-posts-settings","./query-settings/twrpb-query-settings/twrpb-query-settings","./query-settings/twrpb-search-setting/twrpb-search-setting","./query-settings/twrpb-statuses-settings/twrpb-statuses-settings","./widget-blocks/twrp-color-picker","./widget-blocks/twrp-widget-components","./widget-blocks/twrp-widget-form","./widget-blocks/twrpb-sync-widget-query-settings","17","createPicker","pickr","Pickr","create","el","container","appClass","swatches","defaultRepresentation","components","preview","opacity","hue","interaction","cancel","clear","save","color","toRGBA","toString","change","setColorRepresentation","18","createWidgetTabs","tabs","19","dataWidgetId","dataQueryId","dataArtblockId","queriesListSelector","queriesInputSelector","articleBlockSettingsContainerSelector","addQueryToListIfDoNotExist","widgetId","queryId","ajaxNonce","queryExistInList","ajax","url","ajaxurl","method","action","widget_id","query_id","nonce","queriesList","getWidgetWrapperById","updateQueriesInput","makeAllQueriesCollapsible","fail","updateAllWidgetsListOnLoad","getAllWidgets","widget","queries","queryInput","isNonEmptyString","elem","Boolean","getQueriesInputValues","initializeAllQueriesSorting","update","getClosestWidgetId","getQueryItemById","queriesItems","query","getClosestQueryId","getArticleBlockSettings","artblockId","artblock_id","widgetWrapper","removeQueryFromList","artblockSettingsHTML","articleBlocksCache","artblockWrapper","addArticleBlockToCache","hasArticleBlockInCache","$artblockId","getArticleBlockFromCache","artblockContainer","detach","insertArticleBlock","20","widgetFormSelector","queryTabSettingsSelector","updateAllWidgetSyncClasses","syncSettingValue","addSyncClassToWidget","removeSyncClassFromWidget","syncAllWidgetSettings","eq","syncElement","addDocumentEvents","syncTheSetting","removeDocumentEvents","off","target","elementChanged","elementName","settingControl","settingShouldBeSynched","allWidgetQueriesTabs","nameSuffixToSearch","allSimilarQuerySettings","settingControlsToTriggerChanges","triggerChanges","firstControl","includes","triggerNecessaryChanges","elementType","getElementChangedType","valueToChange","elementsChanged","currentElement","propValue","add","children","changeAllSettings","settingElement","not","filterSimilarQuerySettings"],"mappings":"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","file":"script.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",null,"import $ from 'jquery';\nimport 'jqueryui';\n\n$( enableCollapsibleSettings );\n\nfunction enableCollapsibleSettings() {\n\t$( '.twrpb-collapsible' ).each( function() {\n\t\tconst element = $( this );\n\t\tconst activeTabIndex = ( element.attr( 'data-twrpb-is-collapsed' ) === '1' ) ? 0 : false;\n\n\t\telement.accordion( {\n\t\t\tactive: activeTabIndex,\n\t\t\theightStyle: 'content',\n\t\t\tcollapsible: true,\n\t\t\ticons: false,\n\t\t} );\n\t} );\n}\n","import $ from 'jquery';\nimport 'jqueryui';\n\n// Todo... Remove all paragraphs with hide.\n\n// #region -- Run hideLeft/ showLeft only one at time.\n\nlet horizontalAnimationRunning = false;\n\nconst horizontalAnimationQueue = [];\n\nfunction addQueueAnimation( functionName, args ) {\n\thorizontalAnimationRunning = true;\n\tconst queueItem = { name: functionName, parameters: args };\n\thorizontalAnimationQueue.push( queueItem );\n}\n\nfunction nextQueueAnimation() {\n\tif ( horizontalAnimationQueue.length ) {\n\t\tconst horizontalQueueItem = horizontalAnimationQueue.pop();\n\n\t\tif ( horizontalAnimationQueue.length === 0 ) {\n\t\t\thorizontalAnimationRunning = false;\n\t\t} else {\n\t\t\thorizontalAnimationRunning = true;\n\t\t}\n\n\t\tconst functionName = horizontalQueueItem.name;\n\t\tfunctionName.apply( null, horizontalQueueItem.parameters );\n\t}\n\n\tif ( horizontalAnimationQueue.length === 0 ) {\n\t\thorizontalAnimationRunning = false;\n\t} else {\n\t\thorizontalAnimationRunning = true;\n\t}\n}\n\nfunction horizontalAnimationIsRunning() {\n\treturn horizontalAnimationRunning;\n}\n\nfunction makeHorizontalRunning() {\n\thorizontalAnimationRunning = true;\n}\n\n// #endregion -- Run hideLeft/ showLeft only one at time.\n\nconst effectDuration = 500;\nconst effectDurationHorizontal = 300;\n\nfunction toggleDisplay( element: JQuery ): void {\n\tif ( element.hasClass( 'twrpb-hidden' ) ) {\n\t\tshowUp( element );\n\t} else {\n\t\thideUp( element );\n\t}\n}\n\n// #region -- Hide/Show Vertically\n\nfunction hideUp( element: JQuery ): void {\n\t$( element ).slideUp( {\n\t\tduration: effectDuration,\n\t\tcomplete() {\n\t\t\taddHideClass( element );\n\t\t},\n\t} );\n}\n\nfunction showUp( element: JQuery ): void {\n\t$( element ).slideDown( {\n\t\tduration: effectDuration,\n\t\tcomplete() {\n\t\t\tremoveHideClass( element );\n\t\t},\n\t} );\n}\n\n// #endregion -- Hide/Show Vertically\n\n// =============================================================================\n\n/**\n * Hide a HTML element with a blind effect from the left.\n *\n * @param {HTMLElement} element A jquery element.\n * @param {'remove'} remove Add 'remove' to remove the element from the DOM.\n */\nfunction hideLeft( element: JQuery, remove: string = '' ): void {\n\t// If something is being hidden/revealed, then wait for it to finish.\n\tif ( horizontalAnimationIsRunning() ) {\n\t\taddQueueAnimation( hideLeft, [ element, remove ] );\n\t\treturn;\n\t}\n\tmakeHorizontalRunning();\n\n\tlet completeFunction = function() {\n\t\taddHideClass( element );\n\t\tnextQueueAnimation();\n\t};\n\tif ( remove === 'remove' ) {\n\t\tcompleteFunction = function() {\n\t\t\tremoveElement( element );\n\t\t\tnextQueueAnimation();\n\t\t};\n\t}\n\n\t$( element ).hide( {\n\t\teffect: 'blind',\n\t\tduration: effectDurationHorizontal,\n\t\tdirection: 'left',\n\t\tcomplete: completeFunction,\n\t} );\n}\n\n/**\n * Show a HTML element with a blind effect from the left.\n *\n * @param {HTMLElement} element A jquery element.\n * @param {'hide_first'} hideFirst Add 'hide_first' to first hide then show, if the\n * element already exists.\n */\nfunction showLeft( element: JQuery, hideFirst: string = '' ): void {\n\t// If something is being hidden/revealed, then wait for it to finish.\n\tif ( horizontalAnimationIsRunning() ) {\n\t\taddQueueAnimation( showLeft, [ element, hideFirst ] );\n\t\treturn;\n\t}\n\tmakeHorizontalRunning();\n\n\tif ( hideFirst === 'hide_first' ) {\n\t\telement.addClass( 'twrpb-hidden' );\n\t}\n\n\t$( element ).show( {\n\t\teffect: 'blind',\n\t\tduration: effectDurationHorizontal,\n\t\tdirection: 'left',\n\t\tcomplete() {\n\t\t\tremoveHideClass( element );\n\t\t\tnextQueueAnimation();\n\t\t},\n\t} );\n}\n\n// =============================================================================\n\nfunction addHideClass( element: JQuery ): void {\n\t$( element ).addClass( 'twrpb-hidden' );\n}\n\nfunction removeHideClass( element: JQuery ): void {\n\t$( element ).removeClass( 'twrpb-hidden' ).css( 'display', '' );\n}\n\nfunction removeElement( element: JQuery ): void {\n\t$( element ).remove();\n}\n\n// =============================================================================\n\nexport {\n\ttoggleDisplay,\n\tshowUp,\n\thideUp,\n\thideLeft,\n\tshowLeft,\n};\n","import $ from 'jquery';\nimport { toggleDisplay } from '../admin-blocks/twrpb-hidden/twrpb-hidden';\n\nconst showButtonSelector = '.twrpb-icons-spoiler__btn';\n\n$( document ).on( 'click', showButtonSelector, hideOrShowIconsSpoiler );\n\nfunction hideOrShowIconsSpoiler() {\n\tconst spoilerWrapper = $( this ).parent( '.twrpb-icons-spoiler__category' ).find( '.twrpb-icons-spoiler__spoiler' );\n\ttoggleDisplay( spoilerWrapper );\n}\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { showUp, hideUp } from '../admin-blocks/twrpb-hidden/twrpb-hidden';\n\n// #region -- Hide or show custom date format depending on human readable date format.\n\nconst humanReadableEnabledCheckboxSelector = '#twrpb-general-settings__human_readable_date-setting-true';\nconst customDateWrapperSelector = '#twrpb-general-settings__date_format-wrapper';\n\nfunction showOrHideCustomDateFormat() {\n\tconst humanReadableEnabledCheckbox = $( humanReadableEnabledCheckboxSelector );\n\tconst customDateWrapper = $( customDateWrapperSelector );\n\n\tif ( humanReadableEnabledCheckbox.is( ':checked' ) ) {\n\t\thideUp( customDateWrapper );\n\t} else {\n\t\tshowUp( customDateWrapper );\n\t}\n}\n\n$( showOrHideCustomDateFormat );\n$( document ).on( 'click', showOrHideCustomDateFormat );\n\n// #endregion -- Hide or show custom date format depending on human readable date format.\n\n// #region -- Add an Icon preview on the right.\n\nconst iconWrapperClassName = 'twrpb-general-settings__icon-preview';\nconst iconAndSvgElem = '<span class=\"' + iconWrapperClassName + '\"><svg><use/></svg></span>';\nconst selectNames = [ 'author_icon', 'date_icon', 'category_icon', 'comments_icon', 'comments_disabled_icon', 'views_icon' ];\n\n$( updateAllIcons );\n$( document ).on( 'change', getDocumentOnClickSelector(), onChangeHandler );\n\n/**\n * Handler for the selection of the icon. Update the preview of changed icon.\n */\nfunction onChangeHandler( this: JQuery ) {\n\tconst selectName = String( $( this ).attr( 'name' ) );\n\n\tif ( ! selectName ) {\n\t\treturn;\n\t}\n\n\tupdateIcon( selectName );\n}\n\n/**\n * Update all icons on all selectors.\n */\nfunction updateAllIcons() {\n\tfor ( const selectName of selectNames ) {\n\t\tupdateIcon( selectName );\n\t}\n}\n\n/**\n * Given a selector name, update the icon corresponding to it.\n */\nfunction updateIcon( selectName: string ): void {\n\tconst selectElem = $( 'select[name=\"' + selectName + '\"' );\n\n\tif ( selectElem.length === 0 ) {\n\t\treturn;\n\t}\n\n\tconst selectWrapper = selectElem.parent();\n\tconst iconId = String( selectElem.val() );\n\n\tselectWrapper.find( '.' + iconWrapperClassName ).remove();\n\t$( iconAndSvgElem ).insertBefore( selectElem );\n\tselectWrapper.find( 'use' ).attr( 'href', '#' + iconId );\n}\n\n/**\n * Get the jQuery selector to attach the event to the document.\n */\nfunction getDocumentOnClickSelector(): string {\n\tlet documentOnClickSelector = '';\n\n\tfor ( const selectName of selectNames ) {\n\t\tif ( documentOnClickSelector ) {\n\t\t\tdocumentOnClickSelector = documentOnClickSelector + ', ';\n\t\t}\n\t\tdocumentOnClickSelector = documentOnClickSelector + 'select[name=\"' + selectName + '\"]';\n\t}\n\n\treturn documentOnClickSelector;\n}\n\n// #endregion -- Add an Icon preview on the right.\n\n// #region -- Add icons preview on the right for rating packs.\n\nconst ratingIconsDataSetElementId = 'twrpb-general-settings__rating_pack_icons-wrapper';\nconst dataHolderName = 'data-twrpb-rating-packs';\nconst selectRatingName = 'rating_pack_icons';\n\nconst iconsPreviewWrapperClassName = 'twrpb-general-select__rating_icons_preview';\nconst iconsPreviewWrapper = '<span class=\"' + iconsPreviewWrapperClassName + '\"></span>';\nconst ratingIconAndSvgElem = iconAndSvgElem;\nlet ratingIconsSet = null;\n\n$( updateRatingIcons );\n$( document ).on( 'change', 'select[name=\"' + selectRatingName + '\"]', updateRatingIcons );\n\nfunction setRatingIconsData() {\n\tconst dataHolderElement = $( '#' + ratingIconsDataSetElementId );\n\tif ( dataHolderElement.length === 0 ) {\n\t\treturn;\n\t}\n\n\tconst toParse = dataHolderElement.attr( dataHolderName );\n\n\tif ( ( typeof toParse ) !== 'string' ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tratingIconsSet = JSON.parse( toParse );\n\t} catch ( e ) {\n\t\t// Do nothing.\n\t}\n}\n\nfunction updateRatingIcons() {\n\tif ( null === ratingIconsSet ) {\n\t\tsetRatingIconsData();\n\t}\n\n\tconst selectElem = $( 'select[name=\"' + selectRatingName + '\"]' );\n\n\tif ( selectElem.length === 0 ) {\n\t\treturn;\n\t}\n\n\tconst selectWrapper = selectElem.parent();\n\tconst selectedRatingPack = String( selectElem.val() );\n\n\t// Check if all property exists before accessing them.\n\tif ( ! ( selectedRatingPack in ratingIconsSet ) ||\n\t\t! ( 'empty' in ratingIconsSet[ selectedRatingPack ] ) ||\n\t\t! ( 'half' in ratingIconsSet[ selectedRatingPack ] ) ||\n\t\t! ( 'full' in ratingIconsSet[ selectedRatingPack ] )\n\t) {\n\t\treturn;\n\t}\n\n\tconst emptyIconId = ratingIconsSet[ selectedRatingPack ].empty;\n\tconst halfFilledIconId = ratingIconsSet[ selectedRatingPack ].half;\n\tconst filledIconId = ratingIconsSet[ selectedRatingPack ].full;\n\n\tselectWrapper.find( '.' + iconsPreviewWrapperClassName ).remove();\n\tselectWrapper.prepend( iconsPreviewWrapper );\n\n\tconst iconsWrapperPreviewElement = selectWrapper.find( '.' + iconsPreviewWrapperClassName );\n\t$( ratingIconAndSvgElem ).appendTo( iconsWrapperPreviewElement ).find( 'use' ).attr( 'href', '#' + filledIconId );\n\t$( ratingIconAndSvgElem ).appendTo( iconsWrapperPreviewElement ).find( 'use' ).attr( 'href', '#' + halfFilledIconId );\n\t$( ratingIconAndSvgElem ).appendTo( iconsWrapperPreviewElement ).find( 'use' ).attr( 'href', '#' + emptyIconId );\n}\n\n// #endregion -- Add icons preview on the right for rating packs.\n\n// #region -- Auto-Choose the compatible disabled icon.\n\nconst selectCommentIconSelector = '#twrpb-general-settings__comments_icon-setting';\nconst selectDisabledCommentIconSelector = '#twrpb-general-settings__comments_disabled_icon-setting';\n\nconst dataHolderElementSelector = '#twrpb-general-settings__comments_disabled_icon-wrapper';\nconst dataHolderAttrName = 'data-twrpb-related-comment-icons';\nlet compatibleDisabledComments = null;\n\nconst autoSelectIconSwitchName = 'comments_disabled_icon_auto_select';\n\n$( enableOrDisableIconSelect );\n$( document ).on( 'change', selectCommentIconSelector, onChangeAutoSelectHandler );\n$( document ).on( 'change', 'input[name=\"' + autoSelectIconSwitchName + '\"]', enableOrDisableIconSelect );\n$( document ).on( 'submit', onSubmitSendDisable );\n\nfunction setCommentsData() {\n\tconst dataHolderElement = $( dataHolderElementSelector );\n\tif ( dataHolderElement.length === 0 ) {\n\t\treturn;\n\t}\n\n\tconst toParse = dataHolderElement.attr( dataHolderAttrName );\n\n\tif ( ( typeof toParse ) !== 'string' ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tcompatibleDisabledComments = JSON.parse( toParse );\n\t} catch ( e ) {\n\t\t// Do nothing.\n\t}\n}\n\nfunction onChangeAutoSelectHandler() {\n\tif ( isEnableAutoSelect() ) {\n\t\tdoDisabledCommentIconAutoSelect();\n\t}\n}\n\nfunction doDisabledCommentIconAutoSelect() {\n\tif ( compatibleDisabledComments === null ) {\n\t\tsetCommentsData();\n\t}\n\tif ( compatibleDisabledComments === null ) {\n\t\treturn;\n\t}\n\n\tconst commentId = String( $( selectCommentIconSelector ).val() );\n\n\tif ( ! compatibleDisabledComments[ commentId ] ) {\n\t\treturn;\n\t}\n\n\tconst compatibleDisabledCommentIconId = String( compatibleDisabledComments[ commentId ] );\n\n\t$( selectDisabledCommentIconSelector ).val( compatibleDisabledCommentIconId ).trigger( 'change' );\n}\n\nlet firstTime = true;\nfunction enableOrDisableIconSelect() {\n\tif ( isEnableAutoSelect() ) {\n\t\tdisableIconSelector();\n\t\tif ( ! firstTime ) {\n\t\t\tdoDisabledCommentIconAutoSelect();\n\t\t}\n\t\tfirstTime = false;\n\t} else {\n\t\tenableIconSelector();\n\t}\n}\n\nfunction isEnableAutoSelect(): boolean {\n\tconst val = String( $( 'input[name=\"' + autoSelectIconSwitchName + '\"]:checked' ).val() );\n\tif ( parseInt( val ) === 1 || val === 'true' ) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction disableIconSelector() {\n\t$( selectDisabledCommentIconSelector ).prop( 'disabled', true );\n}\n\nfunction enableIconSelector() {\n\t$( selectDisabledCommentIconSelector ).removeProp( 'disabled' );\n}\n\nfunction onSubmitSendDisable() {\n\tenableIconSelector();\n}\n\n// #endregion -- Auto-Choose the compatible disabled icon.\n","import $ from 'jquery';\nimport { hideUp, showUp } from '../../admin-blocks/twrpb-hidden/twrpb-hidden';\n\ndeclare let CodeMirror: any;\nlet codeMirrorInstance = null;\n\n$( enableCodeMirror );\n\nfunction enableCodeMirror(): void {\n\tconst element = document.getElementById( 'twrpb-advanced-settings__textarea' );\n\n\tif ( element ) {\n\t\tcodeMirrorInstance = CodeMirror.fromTextArea( element, {\n\t\t\tmode: 'application/json',\n\t\t\ttheme: 'material-darker',\n\t\t\tindentUnit: 4,\n\t\t\tindentWithTabs: true,\n\t\t\tlineNumbers: true,\n\t\t\tautoRefresh: true,\n\t\t} );\n\t}\n}\n\n// #region -- Show/Hide Editor\n\nconst applySettingSelector = '#twrpb-advanced-settings__is-applied-selector';\nconst settingWrapperSelector = '#twrpb-advanced-settings__textarea-wrapper';\n\n$( hideOrShowSetting );\n$( document ).on( 'change', applySettingSelector, hideOrShowSetting );\n\nfunction hideOrShowSetting() {\n\tconst settingIsAppliedVal = String( $( applySettingSelector ).val() );\n\n\tif ( settingIsAppliedVal === 'not_apply' ) {\n\t\thideUp( $( settingWrapperSelector ) );\n\t} else {\n\t\tshowUp( $( settingWrapperSelector ) );\n\t}\n}\n\n// #endregion -- Show/Hide Editor\n\n// #region -- Invalid JSON\n\nconst textareaWrapperSelector = '#twrpb-advanced-settings__textarea-wrapper';\nconst warningSelector = '#twrpb-setting-note__invalid_json_warning';\n\n$( showOrHideJSONInvalidWarning );\n$( document ).on( 'change keyup paste', textareaWrapperSelector, showOrHideJSONInvalidWarning );\n\nfunction showOrHideJSONInvalidWarning() {\n\tif ( codeMirrorInstance === null ) {\n\t\treturn;\n\t}\n\n\tconst textareaJSON = codeMirrorInstance.getValue();\n\n\tif ( isValidJSON( textareaJSON ) || '' === textareaJSON ) {\n\t\thideUp( $( warningSelector ) );\n\t} else {\n\t\tshowUp( $( warningSelector ) );\n\t}\n}\n\nfunction isValidJSON( jsonString ) {\n\ttry {\n\t\tconst o = JSON.parse( jsonString );\n\n\t\t// Handle non-exception-throwing cases:\n\t\t// Neither JSON.parse(false) or JSON.parse(1234) throw errors, hence the type-checking,\n\t\t// but... JSON.parse(null) returns null, and typeof null === \"object\",\n\t\t// so we must check for that, too. Thankfully, null is falsey, so this suffices:\n\t\tif ( o && typeof o === 'object' ) {\n\t\t\treturn true;\n\t\t}\n\t} catch ( e ) { }\n\n\treturn false;\n}\n\n// #endregion -- Invalid JSON\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { showUp, hideUp, hideLeft, showLeft } from '../../admin-blocks/twrpb-hidden/twrpb-hidden';\n\ndeclare const wp: any;\n\n// #region -- Hide/Show Author List and Add Button based on option selected.\n\nconst authorTypeSelector = $( '#twrpb-author-settings__select_type' );\n\nconst authorSearchWrap = $( '#twrpb-author-settings__author-search-wrap' );\nconst authorToHideList = $( '#twrpb-author-settings__js-authors-list' );\n\n// $( hideOrShowVisualList );\n$( document ).on( 'change', '#twrpb-author-settings__select_type', hideOrShowVisualList );\n\n/**\n * Hide or show the visual list and the form input to search for users.\n */\nfunction hideOrShowVisualList() {\n\tconst authorTypeVal = authorTypeSelector.val();\n\n\tif ( 'IN' === authorTypeVal || 'OUT' === authorTypeVal ) {\n\t\tshowUp( authorSearchWrap );\n\t\tshowUp( authorToHideList );\n\t} else {\n\t\thideUp( authorSearchWrap );\n\t\thideUp( authorToHideList );\n\t}\n}\n\n// #endregion -- Hide/Show Author List and Add Button based on option selected.\n\n// #region -- Manage Author Search\n\n$( initializeAutoComplete );\n\n/**\n * The search input where administrators will search for users.\n */\nconst authorSearchInput = $( '#twrpb-author-settings__js-author-search' );\n\n/**\n * Initialize the search input, when a user enter some characters, it will\n * automatically search and display the options.\n */\nfunction initializeAutoComplete() {\n\tauthorSearchInput.autocomplete( {\n\t\tsource: showSearchedUsers,\n\t\tminLength: 2,\n\t} ).autocomplete( 'widget' ).addClass( 'twrpb-jqueryui-autocomplete-menu' );\n}\n\n/**\n * Search for the users and append the results into the autocomplete selector.\n */\nfunction showSearchedUsers( request: any, sendToControl: CallableFunction ): void {\n\tconst allUsers = new wp.api.collections.Users();\n\tconst usersFound: Array<Object> = [];\n\n\tallUsers.fetch( {\n\t\tdata: {\n\t\t\t_fields: 'id,name',\n\t\t\tsearch: request.term,\n\t\t},\n\t} );\n\n\tallUsers.once( 'sync', updateCategories );\n\n\tfunction updateCategories() {\n\t\tfor ( let i = 0; i < allUsers.length; i++ ) {\n\t\t\tlet name, id;\n\t\t\ttry {\n\t\t\t\tname = decodeHtml( allUsers.models[ i ].attributes.name );\n\t\t\t\tid = allUsers.models[ i ].attributes.id;\n\t\t\t} catch ( error ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tusersFound.push( {\n\t\t\t\tvalue: name,\n\t\t\t\tlabel: name,\n\t\t\t\tid,\n\t\t\t} );\n\t\t}\n\t\tsendToControl( usersFound );\n\t}\n\n\tallUsers.once( 'error', function() {\n\t\tconsole.error( 'TWRP Backbone error when getting users.' ); // eslint-disable-line\n\t\tupdateCategories();\n\t} );\n\n\tallUsers.once( 'invalid', function() {\n\t\tconsole.error( 'TWRP Backbone invalid when getting users.' ); // eslint-disable-line\n\t\tupdateCategories();\n\t} );\n}\n\n// #endregion -- Manage Author Search\n\n// #region -- Add an author\n\nconst authorsIdsInput = $( '#twrpb-author-settings__js-author-ids' );\n\nconst authorsVisualList = $( '#twrpb-author-settings__js-authors-list' );\n\n/**\n * Attribute on authorsVisualList that holds the aria label for the remove button.\n */\nconst ariaLabelDataAttr = 'data-twrpb-aria-remove-label';\n\n/**\n * The template for an author item, to be appended to the visual list. Note that\n * we have a similar template in the PHP file, so a change here will require\n * also a change there, and vice-versa.\n */\nconst authorVisualItem = $(\n\t'<div class=\"twrpb-display-list__item twrpb-author-settings__author-item\">' +\n\t\t'<div class=\"twrpb-author-settings__author-item-name\"></div>' +\n\t\t'<button class=\"twrpb-display-list__item-remove-btn twrpb-author-settings__js-author-remove-btn\" type=\"button\">' +\n\t\t\t'<span class=\"dashicons dashicons-no\"></span>' +\n\t\t'</button>' +\n\t'</div>'\n);\n\n/**\n * The author attribute name that hold the Id of a visual item.\n */\nconst authorIdAttrName = 'data-author-id';\n\n$( document ).on( 'click', '#twrpb-author-settings__js-author-add-btn', handleAddAuthorClick );\n$( document ).on( 'keypress', '#twrpb-author-settings__js-author-search', handleSearchInputKeypress );\n\n/**\n * When a user click \"enter\", add the current selected author to the list.\n */\nfunction handleSearchInputKeypress( event: JQueryEventObject ): void {\n\tconst keycode = ( event.keyCode ? event.keyCode : event.which );\n\tif ( keycode !== 13 ) {\n\t\treturn;\n\t}\n\n\tevent.preventDefault();\n\tconst autocompleteInstance: any = authorSearchInput.autocomplete( 'instance' );\n\n\tlet id: string, name: string;\n\ttry {\n\t\tconst selectedItem = autocompleteInstance.selectedItem;\n\t\tid = selectedItem.id;\n\t\tname = selectedItem.label;\n\t} catch ( error ) {\n\t\treturn;\n\t}\n\n\taddAuthor( id, name );\n}\n\n/**\n * Handles the click on \"Add author\" button.\n */\nfunction handleAddAuthorClick(): void {\n\tconst autocompleteInstance: any = authorSearchInput.autocomplete( 'instance' );\n\n\tlet id: string, name: string;\n\ttry {\n\t\tconst selectedItem = autocompleteInstance.selectedItem;\n\t\tid = selectedItem.id;\n\t\tname = selectedItem.label;\n\t} catch ( error ) {\n\t\treturn;\n\t}\n\n\taddAuthor( id, name );\n}\n\n/**\n * Add an author to the list of selected authors(both visual, and in the hidden\n * input).\n */\nfunction addAuthor( id:number|string, name: string ): void {\n\t_addAuthorToVisualList( id, name );\n\t_addAuthorToHiddenInput( id );\n\tremoveOrAddNoAuthorsText();\n}\n\n/**\n * Add an author to the visual list.\n */\nfunction _addAuthorToVisualList( id: number|string, name: string ): void {\n\tif ( authorExistInVisualList( id ) ) {\n\t\treturn;\n\t}\n\n\tconst newAuthorItem = authorVisualItem.clone();\n\tconst removeBtnAriaLabel = getRemoveButtonAriaLabel().replace( '%s', sanitizeAuthorName( name ) );\n\tnewAuthorItem.find( '.twrpb-author-settings__author-item-name' ).text( sanitizeAuthorName( name ) );\n\tnewAuthorItem.find( '.twrpb-display-list__item-remove-btn' ).attr( 'aria-label', removeBtnAriaLabel );\n\tnewAuthorItem.attr( authorIdAttrName, id );\n\tauthorsVisualList.append( newAuthorItem );\n\tshowLeft( newAuthorItem, 'hide_first' );\n}\n\n/**\n * Add an author to the list of hidden input.\n */\nfunction _addAuthorToHiddenInput( id: number|string ): void {\n\tif ( authorExistInHiddenInput( id ) ) {\n\t\treturn;\n\t}\n\tid = String( id );\n\tconst previousVal = authorsIdsInput.val();\n\n\tlet newVal = '';\n\tif ( previousVal ) {\n\t\tnewVal = previousVal + ';' + id;\n\t} else {\n\t\tnewVal = id;\n\t}\n\n\tauthorsIdsInput.val( newVal );\n}\n\n// #endregion -- Add an author\n\n// #region -- Remove an author\n\n$( document ).on( 'click', '.twrpb-author-settings__js-author-remove-btn', handleRemoveAuthor );\n\n/**\n * Handle the removing of the authors from the selected list.\n */\nfunction handleRemoveAuthor( this:JQuery ): void {\n\tconst id: number = Number( $( this ).closest( '[' + authorIdAttrName + ']' ).attr( authorIdAttrName ) );\n\n\tif ( ! ( id > 0 ) ) {\n\t\treturn;\n\t}\n\n\tremoveAuthor( id );\n}\n\n/**\n * Removes an author to the list of selected authors(both visual, and in the\n * hidden input).\n */\nfunction removeAuthor( id:number|string ): void {\n\t_removeAuthorFromVisualList( id );\n\t_removeAuthorFromHiddenInput( id );\n\tremoveOrAddNoAuthorsText();\n}\n\n/**\n * Removes the author from the visual list, based on id.\n */\nfunction _removeAuthorFromVisualList( id: string|number ): void {\n\tconst itemToRemove = authorsVisualList.find( '[' + authorIdAttrName + '=\"' + id + '\"]' );\n\t// Remove the attr fast, to trigger to show the empty authors list message\n\t// if necessary.\n\titemToRemove.removeAttr( authorIdAttrName );\n\thideLeft( itemToRemove, 'remove' );\n}\n\n/**\n * Removes an author from the hidden input list.\n */\nfunction _removeAuthorFromHiddenInput( id: number|string ): void {\n\tconst currentValue = String( authorsIdsInput.val() );\n\tid = String( id );\n\n\tconst authorsIds = currentValue.split( ';' );\n\tconst indexOfId = authorsIds.indexOf( id );\n\n\tif ( indexOfId !== -1 ) {\n\t\tauthorsIds.splice( indexOfId, 1 );\n\t\tauthorsIdsInput.val( authorsIds.join( ';' ) );\n\t}\n}\n\n// #endregion -- Remove an author\n\n// #region -- Manage the \"No Authors Added\" Text.\n\n/**\n * Contains the HTML Element that will be inserted/removed as necessary.\n */\nconst noAuthorsText = $( '#twrpb-author-settings__js-no-authors-selected' );\n\n$( removeOrAddNoAuthorsText );\n\n/**\n * Remove or add \"No authors\" text if necessary.\n */\nfunction removeOrAddNoAuthorsText() {\n\t_removeNoAuthorsTextIfNecessary();\n\t_addNoAuthorsTextIfNecessary();\n}\n\n/**\n * If Necessary, removes the \"No Authors selected\" text.\n */\nfunction _removeNoAuthorsTextIfNecessary() {\n\tconst haveItems = ( authorsVisualList.find( `[${ authorIdAttrName }]` ).length > 0 );\n\n\tif ( haveItems ) {\n\t\thideLeft( noAuthorsText );\n\t}\n}\n\n/**\n * If Necessary, adds the \"No Authors selected\" text.\n */\nfunction _addNoAuthorsTextIfNecessary() {\n\tconst haveItems = ( authorsVisualList.find( `[${ authorIdAttrName }]` ).length > 0 );\n\n\tif ( ! haveItems ) {\n\t\tshowLeft( noAuthorsText );\n\t}\n}\n\n// #endregion -- Manage the \"No Authors Added\" Text.\n\n// #region -- Sorting function.\n\n$( initializeSorting );\n\n/**\n * Make the visual items sortable, and update the hidden input accordingly.\n */\nfunction initializeSorting() {\n\tauthorsVisualList.sortable( {\n\t\tplaceholder: 'twrpb-display-list__placeholder',\n\t\tstop: updateAuthorsIdsFromVisualList,\n\t} );\n}\n\n// #endregion -- Sorting function.\n\n// #region -- Helper Functions\n\n/**\n * Check to see if a given author item is displayed in visual list.\n */\nfunction authorExistInVisualList( id: number|string ): boolean {\n\tconst authorItem = authorsVisualList.find( '[' + authorIdAttrName + '=\"' + id + '\"]' );\n\n\tif ( authorItem.length ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Check to see if a given author item exist in the hidden list.\n */\nfunction authorExistInHiddenInput( id: number|string ): boolean {\n\tconst inputVal = String( authorsIdsInput.val() );\n\tid = Number( id );\n\n\tif ( ( ! inputVal ) || ! ( id > 0 ) ) {\n\t\treturn false;\n\t}\n\n\tconst authorsIds = inputVal.split( ';' ).map( mapToInt );\n\n\tif ( authorsIds.indexOf( id ) !== -1 ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n\n\tfunction mapToInt( val: any ): number {\n\t\treturn parseInt( val );\n\t}\n}\n\n/**\n * Updates the Ids in the input in the same order as the ones\n * from the visual list.\n */\nfunction updateAuthorsIdsFromVisualList(): void {\n\tconst authorItems = authorsVisualList.find( '.twrpb-author-settings__author-item' );\n\tconst authorsIds:Array<number> = [];\n\n\tauthorItems.each( function() {\n\t\tconst itemId: number = Number( $( this ).attr( authorIdAttrName ) );\n\n\t\tif ( itemId > 0 ) {\n\t\t\tauthorsIds.push( itemId );\n\t\t}\n\t} );\n\n\tauthorsIdsInput.val( authorsIds.join( ';' ) );\n}\n\n/**\n * Get the aria label for the remove button. In the aria label will be present\n * \"%s\", which will need to be replaced with an author.\n */\nfunction getRemoveButtonAriaLabel(): string {\n\tconst ariaLabel = authorsVisualList.attr( ariaLabelDataAttr );\n\tif ( ! ariaLabel ) {\n\t\treturn '';\n\t}\n\n\treturn ariaLabel;\n}\n\n/**\n * Sanitize the author name.\n */\nfunction sanitizeAuthorName( name: string ): string {\n\t// Names that are get are already sanitized.\n\treturn name;\n}\n\n/**\n * Decodes the HTML entities.\n */\nfunction decodeHtml( html: string ): string {\n\treturn $( '<div>' ).html( html ).text();\n}\n\n// #endregion -- Helper Functions\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { showUp, hideUp, showLeft, hideLeft } from '../../admin-blocks/twrpb-hidden/twrpb-hidden';\n\n// #region -- Defining some global variables.\n\nconst categorySelector = $( '#twrpb-cat-settings__js-cat-dropdown' );\n\nconst categoriesInput = $( '#twrpb-cat-settings__cat-ids' );\n\nconst categoryIdAttrName = 'data-cat-id';\n\nconst categoriesItemsWrapper = $( '#twrpb-cat-settings__cat-list-wrap' );\nconst categoriesEmptyMessage = categoriesItemsWrapper.find( '.twrpb-display-list__empty-msg' );\nconst categoryItem = $(\n\t'<div class=\"twrpb-display-list__item twrpb-cat-settings__cat-list-item\">' +\n\t\t'<div class=\"twrpb-display-list__item-name twrpb-cat-settings__cat-item-name\">' +\n\t\t'</div>' +\n\t\t'<button class=\"twrpb-display-list__item-remove-btn twrpb-cat-settings__cat-remove-btn\" type=\"button\"><span class=\"dashicons dashicons-no\"></span></button>' +\n\t'</div>'\n);\n\n// #endregion -- Defining some global variables.\n\n// #region -- Add a categories on the lists.\n\n$( document ).on( 'click', '#twrpb-cat-settings__add-cat-btn', handleAddCategoryButton );\n\n/**\n * Handle the addition of a new category via the button click.\n */\nfunction handleAddCategoryButton(): void {\n\tconst categoryId: any = categorySelector.find( ':selected' ).val();\n\tconst name = sanitizeCategoryName( categorySelector.find( ':selected' ).text() );\n\n\tif ( categoryId > 0 ) {\n\t\taddCatToInput( categoryId );\n\t\taddCatToVisual( categoryId, name );\n\t}\n}\n\n/**\n * Add a category to the hidden input.\n */\nfunction addCatToInput( categoryId: string|number ): void {\n\tconst oldValue = categoriesInput.val();\n\n\tlet newValue: string|number;\n\tif ( oldValue && categoryId ) {\n\t\tnewValue = oldValue + ';' + categoryId;\n\t} else {\n\t\tnewValue = categoryId;\n\t}\n\n\tif ( ! categoryIdInsertedInInput( categoryId ) ) {\n\t\tcategoriesInput.val( newValue );\n\t}\n}\n\n/**\n * Adds a category to visual list.\n */\nfunction addCatToVisual( categoryId: string|number, name: string ): void {\n\tif ( ! categoryItemIsDisplayed( categoryId ) ) {\n\t\tconst toAppend = categoryItem.clone();\n\t\tconst removeButtonAriaLabel = getRemoveButtonAriaLabel().replace( '%s', sanitizeCategoryName( name ) );\n\n\t\ttoAppend.find( '.twrpb-cat-settings__cat-item-name' ).text( sanitizeCategoryName( name ) );\n\t\ttoAppend.find( '.twrpb-display-list__item-remove-btn' ).attr( 'aria-label', removeButtonAriaLabel );\n\t\ttoAppend.attr( categoryIdAttrName, categoryId );\n\n\t\tcategoriesItemsWrapper.append( toAppend );\n\t\tshowLeft( toAppend, 'hide_first' );\n\t\thideOrShowEmptyMessage();\n\t}\n}\n\n// #endregion -- add a categories on the lists.\n\n// #region -- Removing categories.\n\n$( document ).on( 'click', '.twrpb-cat-settings__cat-remove-btn', handleRemoveCategory );\n\n/**\n * Removes a selected category when a button is clicked.\n */\nfunction handleRemoveCategory( this:JQuery ): void {\n\tconst categoryId = String( $( this ).closest( '[' + categoryIdAttrName + ']' ).attr( categoryIdAttrName ) );\n\tremoveCategoryFromDisplay( categoryId );\n\tremoveCategoryFromInput( categoryId );\n}\n\n/**\n * Removes a category from the display list with the categories.\n */\nfunction removeCategoryFromDisplay( categoryId: string|number ): void {\n\tconst toRemove = categoriesItemsWrapper.find( '[' + categoryIdAttrName + '=\"' + categoryId + '\"]' );\n\ttoRemove.removeAttr( categoryIdAttrName );\n\thideOrShowEmptyMessage();\n\thideLeft( toRemove, 'remove' );\n}\n\n/**\n * Removes a category from the hidden input.\n */\nfunction removeCategoryFromInput( categoryId: string|number ): void {\n\tconst categoryIds = String( categoriesInput.val() ).split( ';' );\n\tconst toRemoveCategoryIndex = categoryIds.indexOf( String( categoryId ) );\n\n\tif ( toRemoveCategoryIndex !== -1 ) {\n\t\tcategoryIds.splice( toRemoveCategoryIndex, 1 );\n\t\tcategoriesInput.val( categoryIds.join( ';' ) );\n\t}\n}\n\n// #endregion -- Removing categories.\n\n// #region -- Show or Hide empty message.\n\nfunction hideOrShowEmptyMessage(): void {\n\t_showEmptyMessageIfNecessary();\n\t_hideEmptyMessageIfNecessary();\n}\n\n/**\n * Show the empty list message, that should be displayed when no items exists.\n */\nfunction _showEmptyMessageIfNecessary(): void {\n\tconst listHaveItems = ( categoriesItemsWrapper.find( '[' + categoryIdAttrName + ']' ).length > 0 );\n\n\tif ( ! listHaveItems ) {\n\t\tshowLeft( categoriesEmptyMessage );\n\t}\n}\n\n/**\n * Hide the empty list message, that should not be displayed when at least an\n * item exists.\n */\nfunction _hideEmptyMessageIfNecessary(): void {\n\tconst listHaveItems = ( categoriesItemsWrapper.find( '[' + categoryIdAttrName + ']' ).length > 0 );\n\n\tif ( listHaveItems ) {\n\t\thideLeft( categoriesEmptyMessage );\n\t}\n}\n\n// #endregion -- Show or Hide empty message.\n\n// #region -- Verify if a category is selected.\n\n/**\n * Check to see if a category item is displayed in the Visual List of categories.\n */\nfunction categoryItemIsDisplayed( categoryId: string|number ): boolean {\n\tconst items = categoriesItemsWrapper.find( '.twrpb-cat-settings__cat-list-item' );\n\n\tlet sameIdFound = false;\n\n\titems.each( function() {\n\t\tif ( categoryId === $( this ).attr( categoryIdAttrName ) ) {\n\t\t\tsameIdFound = true;\n\t\t}\n\t} );\n\n\tif ( sameIdFound ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Check to see if the category Id is found in the hidden input.\n */\nfunction categoryIdInsertedInInput( categoryId: string|number ): boolean {\n\tconst value: any = categoriesInput.val();\n\tif ( ! value ) {\n\t\treturn false;\n\t}\n\tconst categoryIds = value.split( ';' );\n\n\tif ( categoryIds.indexOf( categoryId ) !== -1 ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n// #endregion -- Verify if a category is selected.\n\n// #region -- Make The Categories Sortable.\n\n$( makeItemsSortable );\n\nfunction makeItemsSortable(): void {\n\tcategoriesItemsWrapper.sortable( {\n\t\tplaceholder: 'twrpb-display-list__placeholder',\n\t\tstop: refreshInputtedCategories,\n\t} );\n}\n\n// #endregion -- Make The Categories Sortable.\n\n// #region -- Show/Hide Select For Category Relation.\n\nconst categoryTypeSelect = $( '#twrpb-cat-settings__type' );\nconst categoryRelationWrapper = $( '#twrpb-cat-settings__js-select-relation-wrap' );\nconst mainCategorySettings = $( '#twrpb-cat-settings__js-settings-wrapper' );\n\n// todo: uncomment document.ready.\n// $( hideOrShowCategorySettings );\n$( document ).on( 'change', '#twrpb-cat-settings__type', hideOrShowCategorySettings );\n\nfunction hideOrShowCategorySettings(): void {\n\tconst selectVal = categoryTypeSelect.val();\n\n\tif ( 'NA' === selectVal ) {\n\t\thideUp( mainCategorySettings );\n\t\thideUp( categoryRelationWrapper );\n\t} else if ( 'IN' === selectVal ) {\n\t\tcategoryRelationWrapper.removeClass( 'twrpb-hidden' );\n\t\t// force redraw.\n\t\t$( mainCategorySettings ).css( 'opacity', .99 );\n\t\tsetTimeout( function() {\n\t\t\t$( mainCategorySettings ).css( 'opacity', 1 );\n\t\t}, 20 );\n\t\tshowUp( mainCategorySettings );\n\t \tshowUp( categoryRelationWrapper );\n\t} else {\n\t\tshowUp( mainCategorySettings );\n\t\thideUp( categoryRelationWrapper );\n\t}\n}\n\n// #endregion -- Show/Hide Select For Category Relation.\n\n// #region -- Helpers\n\n/**\n * Get the aria label for the remove button. In the aria label will be present\n * \"%s\", which will need to be replaced with an author.\n */\nfunction getRemoveButtonAriaLabel(): string {\n\tconst ariaLabel = categoriesItemsWrapper.attr( 'data-twrpb-aria-remove-label' );\n\tif ( ! ariaLabel ) {\n\t\treturn '';\n\t}\n\n\treturn ariaLabel;\n}\n\n/**\n * Take out the number of counts and trim the name.\n */\nfunction sanitizeCategoryName( name: string ): string {\n\tconst removeCountParenthesisRegex = /\\([^(]*\\)$/;\n\tname = name.replace( removeCountParenthesisRegex, '' );\n\tname = name.trim();\n\n\treturn name;\n}\n\n// #endregion -- Helpers\n\n// #region -- Refresh Display/Hidden input categories.\n\n/**\n * Refresh the hidden input categories, with Ids taken from the visual list.\n */\nfunction refreshInputtedCategories(): void {\n\tconst categoriesItems = categoriesItemsWrapper.find( '.twrpb-cat-settings__cat-list-item' );\n\n\tlet categoriesIds = '';\n\tcategoriesItems.each( function() {\n\t\tconst catId = String( $( this ).attr( categoryIdAttrName ) );\n\t\tif ( ! categoriesIds ) {\n\t\t\tcategoriesIds = catId;\n\t\t} else {\n\t\t\tcategoriesIds += ';' + catId;\n\t\t}\n\t} );\n\n\tcategoriesInput.val( categoriesIds );\n}\n\n// #endregion -- Refresh Display/Hidden input categories.\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp } from '../../admin-blocks/twrpb-hidden/twrpb-hidden';\n\nconst selectCommentsComparator = $( '#twrpb-comments-settings__js-comparator' );\n\nconst numCommentsInput = $( '#twrpb-comments-settings__js-num_comments' );\n\n$( hideOrShowCommentsNumberInput );\n$( document ).on( 'change', '#twrpb-comments-settings__js-comparator', hideOrShowCommentsNumberInput );\n\nfunction hideOrShowCommentsNumberInput() {\n\tconst comparator = selectCommentsComparator.val();\n\n\tif ( 'NA' === comparator ) {\n\t\thideUp( numCommentsInput );\n\t} else {\n\t\tshowUp( numCommentsInput );\n\t}\n}\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp } from '../../admin-blocks/twrpb-hidden/twrpb-hidden';\n\n// #region -- Polyfill Datepicker\n\nconst after = $( '#twrpb-date-settings__after' );\n\nconst before = $( '#twrpb-date-settings__before' );\n\n$( enableDatePickerIfNecessary );\n\nfunction enableDatePickerIfNecessary() {\n\tif ( inputDateTypeIsAvailable() ) {\n\t\treturn;\n\t}\n\n\tconst options: any = {\n\t\tdateFormat: 'yy-mm-dd',\n\t\tchangeMonth: true,\n\t\tchangeYear: true,\n\t\tbeforeShow() {\n\t\t\t$( '#ui-datepicker-div' ).addClass( 'twrpb-jqueryui-datepicker' );\n\t\t},\n\t};\n\n\tafter.datepicker( options );\n\tbefore.datepicker( options );\n}\n\nfunction inputDateTypeIsAvailable() {\n\tconst input = document.createElement( 'input' );\n\tconst notADateValue = 'not-a-date';\n\n\tinput.setAttribute( 'type', 'date' );\n\tinput.setAttribute( 'value', notADateValue );\n\n\treturn ( input.value !== notADateValue );\n}\n\n// #endregion -- Polyfill Datepicker\n\n// #region -- Hide/Show Date\n\nconst selectDateType = $( '#twrpb-date-settings__js-date-type' );\n\nconst lastPeriodWrapper = $( '#twrpb-date-settings__js-last-period-wrapper' );\n\nconst betweenPeriodWrapper = $( '#twrpb-date-settings__js-between-wrapper' );\n\n$( hideOrShowLastPeriodSettings );\n$( document ).on( 'change', '#twrpb-date-settings__js-date-type', hideOrShowLastPeriodSettings );\n\n$( hideOrShowBetweenTimeSettings );\n$( document ).on( 'change', '#twrpb-date-settings__js-date-type', hideOrShowBetweenTimeSettings );\n\nfunction hideOrShowLastPeriodSettings() {\n\tconst selectedType = selectDateType.val();\n\n\tif ( 'LT' === selectedType ) {\n\t\tshowUp( lastPeriodWrapper );\n\t} else {\n\t\thideUp( lastPeriodWrapper );\n\t}\n}\n\nfunction hideOrShowBetweenTimeSettings() {\n\tconst selectedType = selectDateType.val();\n\n\tif ( 'FT' === selectedType ) {\n\t\tshowUp( betweenPeriodWrapper );\n\t} else {\n\t\thideUp( betweenPeriodWrapper );\n\t}\n}\n\n// #endregion -- Hide/Show Date\n\n// #region -- Number of days not selected.\n\nconst numberOfDaysInputSelector = '#twrpb-date-settings__js-last-days-input';\nconst numberOfDaysRadioSelector = '#twrpb-date-settings__js-custom';\nconst numberOfDaysNoteSelector = '#twrpb-setting-note__post_date_setting_remember';\n\n$( hideOrShowUncheckedRadioNote );\n$( document ).on( 'keyup mouseup change click', '#twrpb-date-settings__js-last-period-wrapper', hideOrShowUncheckedRadioNote );\n\nfunction hideOrShowUncheckedRadioNote() {\n\tconst inputVal = $( numberOfDaysInputSelector ).val();\n\tconst radioIsSelected = $( numberOfDaysRadioSelector ).is( ':checked' );\n\n\tif ( radioIsSelected || ! inputVal ) {\n\t\thideUp( $( numberOfDaysNoteSelector ) );\n\t} else {\n\t\tshowUp( $( numberOfDaysNoteSelector ) );\n\t}\n}\n\n// #endregion -- Number of days not selected.\n","import $ from 'jquery';\nimport { showUp, hideUp } from '../../admin-blocks/twrpb-hidden/twrpb-hidden';\n\nconst metaTypeSelector = '#twrpb-meta-setting__js-meta-type';\nconst metaValueSelector = '#twrpb-meta-setting__js-meta-value-group';\n\n$( showOrHideValueInput );\n$( document ).on( 'change', metaTypeSelector, showOrHideValueInput );\n\nfunction showOrHideValueInput() {\n\tconst metaTypeValue = $( metaTypeSelector ).val();\n\n\tif ( metaTypeValue === 'NOT EXISTS' || metaTypeValue === 'EXISTS' ) {\n\t\thideUp( $( metaValueSelector ) );\n\t} else {\n\t\tshowUp( $( metaValueSelector ) );\n\t}\n}\n\n// #region -- Hide or show the whole meta setting.\n\nconst settingIsAppliedSelector = '#twrpb-meta-setting__js-apply-meta-select';\nconst settingWrapperSelector = '#twrpb-meta-setting__js-setting-wrapper';\n\n$( hideOrShowMetaSetting );\n$( document ).on( 'change', settingIsAppliedSelector, hideOrShowMetaSetting );\n\nfunction hideOrShowMetaSetting() {\n\tconst isApplied = String( $( settingIsAppliedSelector ).val() );\n\n\tif ( 'NA' === isApplied ) {\n\t\thideUp( $( settingWrapperSelector ) );\n\t} else {\n\t\tshowUp( $( settingWrapperSelector ) );\n\t}\n}\n\n// #endregion -- Hide or show the whole meta setting.\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp } from '../../admin-blocks/twrpb-hidden/twrpb-hidden';\n\nconst firstOrderGroup = $( '#twrpb-order-setting__js-first-order-group' );\nconst secondOrderGroup = $( '#twrpb-order-setting__js-second-order-group' );\nconst thirdOrderGroup = $( '#twrpb-order-setting__js-third-order-group' );\n\nconst orderByClassName = 'twrpb-order-setting__js-orderby';\n\nconst orderGroups = [ firstOrderGroup, secondOrderGroup, thirdOrderGroup ];\n\n$( hideOrShowUnnecessarySelectors );\n$( document ).on( 'change', `.${ orderByClassName }`, hideOrShowUnnecessarySelectors );\n\n/**\n * Hide or show the next selectors for the order by and order type, making the\n * user experience better.\n */\nfunction hideOrShowUnnecessarySelectors() {\n\tlet hideNext = false;\n\n\tfor ( let i = 0; i < orderGroups.length; i++ ) {\n\t\tif ( hideNext ) {\n\t\t\thideUp( orderGroups[ i ] );\n\t\t} else {\n\t\t\tshowUp( orderGroups[ i ] );\n\t\t}\n\n\t\tif ( orderGroups[ i ].find( `.${ orderByClassName }` ).val() === 'not_applied' ) {\n\t\t\thideNext = true;\n\t\t\thideUp( orderGroups[ i ].find( '.twrpb-order-setting__js-order-type' ) );\n\t\t} else {\n\t\t\tshowUp( orderGroups[ i ].find( '.twrpb-order-setting__js-order-type' ) );\n\t\t}\n\t}\n}\n\n$( hideOrShowSelectedValues );\n$( document ).on( 'change', `.${ orderByClassName }`, hideOrShowSelectedValues );\n\nfunction hideOrShowSelectedValues() {\n\tfor ( let i = 0; i < orderGroups.length; i++ ) {\n\t\torderGroups[ i ].find( 'option' ).removeAttr( 'disabled' );\n\t}\n\n\tfor ( let i = 0; i < orderGroups.length; i++ ) {\n\t\tconst selectedVal = orderGroups[ i ].find( `.${ orderByClassName }` ).val();\n\t\tif ( selectedVal !== 'not_applied' ) {\n\t\t\tfor ( let j = i + 1; j < orderGroups.length; j++ ) {\n\t\t\t\tconst orderBySelect = orderGroups[ j ].find( `.${ orderByClassName }` );\n\t\t\t\tconst nextSelectedVal = orderBySelect.val();\n\n\t\t\t\torderBySelect.find( `[value=\"${ selectedVal }\"]` ).attr( 'disabled', 'disabled' );\n\n\t\t\t\tif ( nextSelectedVal === selectedVal ) {\n\t\t\t\t\torderBySelect.val( 'not_applied' );\n\t\t\t\t\torderBySelect.trigger( 'change' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n// #region -- Hide/Show Post ID warning notice if selected.\n\nconst postIdOrderWarning = $( '#twrpb-setting-note__ordering_by_post_id_warning' );\n\n$( hideOrShowWarning );\n$( document ).on( 'change', `.${ orderByClassName }`, hideOrShowWarning );\n\nfunction hideOrShowWarning() : void {\n\tlet showWarning = false;\n\n\tfor ( let i = 0; i < orderGroups.length; i++ ) {\n\t\tconst orderByVal = String( $( orderGroups[ i ] ).find( `.${ orderByClassName }` ).val() );\n\n\t\tif ( orderByVal === 'ID' ) {\n\t\t\tshowWarning = true;\n\t\t}\n\t}\n\n\tif ( showWarning ) {\n\t\tshowUp( postIdOrderWarning );\n\t} else {\n\t\thideUp( postIdOrderWarning );\n\t}\n}\n\n// #endregion -- Hide/Show Post ID warning notice if selected.\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp, hideLeft, showLeft } from '../../admin-blocks/twrpb-hidden/twrpb-hidden';\n\ndeclare const wpApiSettings: any;\n\n// #region -- Show/Hide Posts List.\n\nconst postTypeSelect = $( '#twrpb-posts-settings__js-filter-type' );\nconst postVisualList = $( '#twrpb-posts-settings__js-posts-list' );\nconst searchingWrapper = $( '#twrpb-posts-settings__js-posts-search-wrap' );\nconst includeNote = $( '#twrpb-setting-note__post_settings_note' );\n\n$( hideOrShowVisualList );\n$( document ).on( 'change', '#twrpb-posts-settings__js-filter-type', hideOrShowVisualList );\n\n/**\n * Hide or show the visual list and the form input to search for users.\n */\nfunction hideOrShowVisualList() {\n\tconst postsTypeVal = postTypeSelect.val();\n\n\tif ( 'NA' === postsTypeVal ) {\n\t\thideUp( searchingWrapper );\n\t\thideUp( postVisualList );\n\t} else {\n\t\tshowUp( searchingWrapper );\n\t\tshowUp( postVisualList );\n\t}\n\n\tif ( 'IP' === postsTypeVal ) {\n\t\tshowUp( includeNote );\n\t} else {\n\t\thideUp( includeNote );\n\t}\n}\n\n// #endregion -- Show/Hide Posts List.\n\n// #region -- Manage Posts Search\n\n/**\n * The search input where administrators will search for posts.\n */\nconst postsSearchInput = $( '#twrpb-posts-settings__js-posts-search' );\n\n$( initializeAutoComplete );\n\n/**\n * Initialize the search input, when a user enter some characters, it will\n * automatically search and display the options.\n */\nfunction initializeAutoComplete() {\n\tpostsSearchInput.autocomplete( {\n\t\tsource: showSearchedPosts,\n\t\tminLength: 2,\n\t} ).autocomplete( 'widget' ).addClass( 'twrpb-jqueryui-autocomplete-menu' );\n}\n\n/**\n * Search for the posts and append the results into the autocomplete selector.\n */\nasync function showSearchedPosts( request: any, sendToControl: CallableFunction ) {\n\tconst wpApiURL = wpApiSettings.root + wpApiSettings.versionString;\n\tconst fetchUrl = wpApiURL + `search?_fields=id,title&search=${ request.term }&page=1&per_page=10`;\n\tconst fetchedResult = await fetch( fetchUrl );\n\tconst posts = await fetchedResult.json();\n\n\tif ( ! ( posts instanceof Array ) ) {\n\t\tconsole.error( 'TWRP error when fetching posts.' ); // eslint-disable-line\n\t}\n\n\tconst postsToSend = [];\n\tfor ( let i = 0; i < posts.length; i++ ) {\n\t\tpostsToSend.push( {\n\t\t\tvalue: decodeHtml( posts[ i ].title ),\n\t\t\tlabel: decodeHtml( posts[ i ].title ),\n\t\t\tid: posts[ i ].id,\n\t\t} );\n\t}\n\tsendToControl( postsToSend );\n}\n\n// #endregion -- Manage Posts Search\n\n// #region -- Add Post.\n\nconst postsIdsInput = $( '#twrpb-posts-settings__js-posts-ids' );\n\n/**\n * The post attribute name that hold the Id of a visual item.\n */\nconst postIdAttrName = 'data-post-id';\n\n/**\n * The template for a post item, to be appended to the visual list. Note that\n * we have a similar template in the PHP file, so a change here will require\n * also a change there, and vice-versa.\n */\nconst postVisualItem = $(\n\t'<div class=\"twrpb-display-list__item twrpb-posts-settings__post-item\">' +\n\t\t'<div class=\"twrpb-posts-settings__post-item-title\"></div>' +\n\t\t'<button class=\"twrpb-display-list__item-remove-btn twrpb-posts-settings__js-post-remove-btn\" type=\"button\">' +\n\t\t\t'<span class=\"dashicons dashicons-no\"></span>' +\n\t\t'</button>' +\n\t'</div>'\n);\n\n$( document ).on( 'click', '#twrpb-posts-settings__js-posts-add-btn', handleAddPostClick );\n$( document ).on( 'keypress', '#twrpb-posts-settings__js-posts-search', handleSearchInputKeypress );\n\n/**\n * When a user click \"enter\", add the current selected author to the list.\n */\nfunction handleSearchInputKeypress( event: JQueryEventObject ): void {\n\tconst keycode = ( event.keyCode ? event.keyCode : event.which );\n\tif ( keycode !== 13 ) {\n\t\treturn;\n\t}\n\n\tevent.preventDefault();\n\tconst autocompleteInstance: any = postsSearchInput.autocomplete( 'instance' );\n\n\tlet id: string, name: string;\n\ttry {\n\t\tconst selectedItem = autocompleteInstance.selectedItem;\n\t\tid = selectedItem.id;\n\t\tname = selectedItem.label;\n\t} catch ( error ) {\n\t\treturn;\n\t}\n\n\taddPost( id, name );\n}\n\n/**\n * Handles the click on \"Add post\" button.\n */\nfunction handleAddPostClick(): void {\n\tconst autocompleteInstance: any = postsSearchInput.autocomplete( 'instance' );\n\n\tlet id: string, name: string;\n\ttry {\n\t\tconst selectedItem = autocompleteInstance.selectedItem;\n\t\tid = selectedItem.id;\n\t\tname = selectedItem.label;\n\t} catch ( error ) {\n\t\treturn;\n\t}\n\n\taddPost( id, name );\n}\n\n/**\n * Add a post to the list of selected posts(both visual, and in the hidden\n * input).\n */\nfunction addPost( id:number|string, name: string ): void {\n\t_addPostToVisualList( id, name );\n\t_addPostToHiddenInput( id );\n\tremoveOrAddNoPostsText();\n}\n\n/**\n * Add a post to the visual list.\n */\nfunction _addPostToVisualList( id: number|string, name: string ): void {\n\tif ( postExistInVisualList( id ) ) {\n\t\treturn;\n\t}\n\n\tconst newAuthorItem = postVisualItem.clone();\n\tconst removeButtonLabel = getRemoveButtonAriaLabel().replace( '%s', sanitizePostName( name ) );\n\n\tnewAuthorItem.find( '.twrpb-posts-settings__post-item-title' ).text( sanitizePostName( name ) );\n\tnewAuthorItem.find( '.twrpb-display-list__item-remove-btn' ).attr( 'aria-label', removeButtonLabel );\n\n\tnewAuthorItem.attr( postIdAttrName, id );\n\tpostVisualList.append( newAuthorItem );\n\tshowLeft( newAuthorItem, 'hide_first' );\n}\n\n/**\n * Add a post to the list of hidden input.\n */\nfunction _addPostToHiddenInput( id: number|string ): void {\n\tif ( postExistInHiddenInput( id ) ) {\n\t\treturn;\n\t}\n\tid = String( id );\n\tconst previousVal = postsIdsInput.val();\n\n\tlet newVal = '';\n\tif ( previousVal ) {\n\t\tnewVal = previousVal + ';' + id;\n\t} else {\n\t\tnewVal = id;\n\t}\n\n\tpostsIdsInput.val( newVal );\n}\n\n// #endregion -- Add Post.\n\n// #region -- Remove post\n\n$( document ).on( 'click', '.twrpb-posts-settings__js-post-remove-btn', handleRemovePost );\n\n/**\n * Handle the removing of the posts from the selected list.\n */\nfunction handleRemovePost(): void {\n\tlet id: string|number = $( this ).closest( '[' + postIdAttrName + ']' ).attr( postIdAttrName );\n\n\tid = Number( id );\n\tif ( ! ( id > 0 ) ) {\n\t\treturn;\n\t}\n\n\tremovePost( id );\n}\n\n/**\n * Removes a post to the list of selected posts(both visual, and in the\n * hidden input).\n */\nfunction removePost( id:number|string ): void {\n\t_removePostFromVisualList( id );\n\t_removePostFromHiddenInput( id );\n\tremoveOrAddNoPostsText();\n}\n\n/**\n * Removes a post from the visual list, based on id.\n */\nfunction _removePostFromVisualList( id: string|number ): void {\n\tconst itemToRemove = postVisualList.find( '[' + postIdAttrName + '=\"' + id + '\"]' );\n\titemToRemove.removeAttr( postIdAttrName );\n\thideLeft( itemToRemove, 'remove' );\n}\n\n/**\n * Removes a post from the hidden input list.\n */\nfunction _removePostFromHiddenInput( id: number|string ): void {\n\tconst currentValue = String( postsIdsInput.val() );\n\tid = String( id );\n\n\tconst postsIds = currentValue.split( ';' );\n\tconst indexOfId = postsIds.indexOf( id );\n\n\tif ( indexOfId !== -1 ) {\n\t\tpostsIds.splice( indexOfId, 1 );\n\t\tpostsIdsInput.val( postsIds.join( ';' ) );\n\t}\n}\n\n// #endregion -- Remove post\n\n// #region -- Manage the \"No Authors Added\" Text.\n\n/**\n * Contains the HTML Element that will be inserted/removed as necessary.\n */\nconst noPostsText = $( '#twrpb-posts-settings__js-no-posts-selected' );\n\n$( removeOrAddNoPostsText );\n\n/**\n * Remove or add \"No posts selected\" text if necessary.\n */\nfunction removeOrAddNoPostsText() {\n\t_removeNoPostsTextIfNecessary();\n\t_addNoPostsTextIfNecessary();\n}\n\n/**\n * If Necessary, removes the \"No Posts selected\" text.\n */\nfunction _removeNoPostsTextIfNecessary() {\n\tconst haveItems = ( postVisualList.find( `[${ postIdAttrName }]` ).length > 0 );\n\n\tif ( haveItems ) {\n\t\thideLeft( noPostsText );\n\t}\n}\n\n/**\n * If Necessary, adds the \"No Posts selected\" text.\n */\nfunction _addNoPostsTextIfNecessary() {\n\tconst haveItems = ( postVisualList.find( `[${ postIdAttrName }]` ).length > 0 );\n\n\tif ( ! haveItems ) {\n\t\tshowLeft( noPostsText );\n\t}\n}\n\n// #endregion -- Manage the \"No Authors Added\" Text.\n\n// #region -- Sorting function\n\n$( initializeSorting );\n\n/**\n * Make the visual items sortable, and update the hidden input accordingly.\n */\nfunction initializeSorting() {\n\tpostVisualList.sortable( {\n\t\tplaceholder: 'twrpb-display-list__placeholder',\n\t\tstop: updatePostsIdsFromVisualList,\n\t} );\n}\n\n// #endregion -- Sorting function\n\n// #region -- Helper Functions\n\n/**\n * Check to see if a given post item is displayed in visual list.\n */\nfunction postExistInVisualList( id: number|string ): boolean {\n\tconst postItem = postVisualList.find( '[' + postIdAttrName + '=\"' + id + '\"]' );\n\n\tif ( postItem.length ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Check to see if a given post item exist in the hidden list.\n */\nfunction postExistInHiddenInput( id: number|string ): boolean {\n\tconst inputVal = String( postsIdsInput.val() );\n\tid = Number( id );\n\n\tif ( ( ! inputVal ) || ! ( id > 0 ) ) {\n\t\treturn false;\n\t}\n\n\tconst postsIds = inputVal.split( ';' ).map( mapToInt );\n\n\tif ( postsIds.indexOf( id ) !== -1 ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n\n\tfunction mapToInt( val: any ): number {\n\t\treturn parseInt( val );\n\t}\n}\n\n/**\n * Updates the Ids in the input in the same order as the ones\n * from the visual list.\n */\nfunction updatePostsIdsFromVisualList(): void {\n\tconst postItems = postVisualList.find( '.twrpb-posts-settings__post-item' ).filter( '[' + postIdAttrName + ']' );\n\tconst authorsIds = [];\n\n\tpostItems.each( function() {\n\t\tlet itemId: string|number = $( this ).attr( postIdAttrName );\n\n\t\titemId = +itemId;\n\t\tif ( itemId > 0 ) {\n\t\t\tauthorsIds.push( itemId );\n\t\t}\n\t} );\n\n\tpostsIdsInput.val( authorsIds.join( ';' ) );\n}\n\n/**\n * Sanitize the post name. It does not do something yet.\n */\nfunction sanitizePostName( name: string ): string {\n\treturn name;\n}\n\n/**\n * Get the aria label for the remove button. In the aria label will be present\n * \"%s\", which will need to be replaced with an author.\n */\nfunction getRemoveButtonAriaLabel(): string {\n\tconst ariaLabel = postVisualList.attr( 'data-twrpb-aria-remove-label' );\n\tif ( ! ariaLabel ) {\n\t\treturn '';\n\t}\n\n\treturn ariaLabel;\n}\n\n/**\n * Decodes the HTML entities.\n */\nfunction decodeHtml( html: string ): string {\n\treturn $( '<div>' ).html( html ).text();\n}\n\n// #endregion -- Helper Functions\n","import $ from 'jquery';\n\n// #region -- Ask an alert question before deleting a query.\n\nconst deleteButtonSelector = '.twrpb-queries-table__delete-link';\n\nconst deleteConfirmationMessageHolder = '#twrpb-query-settings__before-deleting-confirmation';\nconst deleteConfirmationMessageData = 'data-twrpb-query-delete-confirm';\n\n$( document ).on( 'click', deleteButtonSelector, handleDeleteButtonClicked );\n\nfunction handleDeleteButtonClicked( event ) {\n\tconst alertMessage = $( deleteConfirmationMessageHolder ).attr( deleteConfirmationMessageData );\n\t// eslint-disable-next-line no-alert\n\tconst confirmation = confirm( alertMessage );\n\n\tif ( ! confirmation ) {\n\t\tevent.preventDefault();\n\t}\n}\n\n// #endregion -- Ask an alert question before deleting a query.\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp } from '../../admin-blocks/twrpb-hidden/twrpb-hidden';\n\nconst searchInput = $( '#twrpb-search-setting__js-search-input' );\nconst warningWrapper = $( '#twrpb-setting-note__search_query_too_short_warning' );\n\n$( hiderOrShowSearchWarning );\n$( document ).on( 'change', '#twrpb-search-setting__js-search-input', hiderOrShowSearchWarning );\n\nfunction hiderOrShowSearchWarning(): void {\n\tconst searchString = String( searchInput.val() );\n\tconst searchStringLength = searchString.length;\n\n\tif ( ( searchStringLength !== 0 ) && ( searchStringLength < 4 ) ) {\n\t\tshowUp( warningWrapper );\n\t} else {\n\t\thideUp( warningWrapper );\n\t}\n}\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp } from '../../admin-blocks/twrpb-hidden/twrpb-hidden';\n\nconst applySettingSelect = $( '#twrpb-statuses-settings__js-apply-select' );\nconst postStatuses = $( '#twrpb-statuses-settings__js-statuses-wrapper' );\n\n$( document ).on( 'change', '#twrpb-statuses-settings__js-apply-select', hideOrShowPostStatuses );\n$( hideOrShowPostStatuses );\n\nfunction hideOrShowPostStatuses() {\n\tif ( applySettingSelect.val() === 'not_applied' ) {\n\t\thideUp( postStatuses );\n\t} else {\n\t\tshowUp( postStatuses );\n\t}\n}\n","// Admin Blocks\nimport './admin-blocks/twrpb-hidden/twrpb-hidden';\nimport './admin-blocks/twrpb-collapsible/twrpb-collapsible';\n\n// Documentation Page\nimport './documentation-page/twrpb-documentation-page';\n\n// General Settings\nimport './general-settings/twrpb-general-settings';\n\n// Query Settings\nimport './query-settings/twrpb-advanced-settings/twrpb-advanced-settings';\nimport './query-settings/twrpb-author-settings/twrpb-author-settings';\nimport './query-settings/twrpb-cat-settings/twrpb-cat-settings';\nimport './query-settings/twrpb-comments-settings/twrpb-comments-settings';\nimport './query-settings/twrpb-date-settings/twrpb-date-settings';\nimport './query-settings/twrpb-meta-setting/twrpb-meta-setting';\nimport './query-settings/twrpb-order-setting/twrpb-order-setting';\nimport './query-settings/twrpb-posts-settings/twrpb-posts-settings';\nimport './query-settings/twrpb-query-settings/twrpb-query-settings';\nimport './query-settings/twrpb-search-setting/twrpb-search-setting';\nimport './query-settings/twrpb-statuses-settings/twrpb-statuses-settings';\n\n// Widget Blocks\nimport './widget-blocks/twrp-widget-form';\nimport './widget-blocks/twrp-widget-components';\nimport './widget-blocks/twrpb-sync-widget-query-settings';\nimport './widget-blocks/twrp-color-picker';\n\nexport default {};\n","import $ from 'jquery';\n\ndeclare const Pickr: any;\n\n$( createPicker );\n$( document ).on( 'widget-updated twrpb-artblock-added twrpb-query-added', createPicker );\n\nfunction createPicker() {\n\tconst colorPickers = $( '.twrp-color-picker' );\n\n\tcolorPickers.each( function() {\n\t\tconst element: any = this;\n\t\tconst input = $( element ).parent().find( 'input' );\n\t\tlet inputVal = input.val();\n\n\t\tif ( ! inputVal ) {\n\t\t\tinputVal = null;\n\t\t}\n\n\t\tconst pickr = Pickr.create( {\n\t\t\tel: element,\n\t\t\ttheme: 'classic',\n\t\t\tcontainer: 'body',\n\t\t\tdefault: inputVal,\n\t\t\tappClass: 'twrp-pickr',\n\n\t\t\tswatches: [\n\t\t\t\t'rgba(244, 67, 54, 1)',\n\t\t\t\t'rgba(233, 30, 99, 1)',\n\t\t\t\t'rgba(156, 39, 176, 1)',\n\t\t\t\t'rgba(103, 58, 183, 1)',\n\t\t\t\t'rgba(63, 81, 181, 1)',\n\t\t\t\t'rgba(33, 150, 243, 1)',\n\t\t\t\t'rgba(3, 169, 244, 1)',\n\t\t\t\t'rgba(0, 188, 212, 1)',\n\t\t\t\t'rgba(0, 150, 136, 1)',\n\t\t\t\t'rgba(76, 175, 80, 1)',\n\t\t\t\t'rgba(139, 195, 74, 1)',\n\t\t\t\t'rgba(205, 220, 57, 1)',\n\t\t\t\t'rgba(255, 235, 59, 1)',\n\t\t\t\t'rgba(255, 193, 7, 1)',\n\t\t\t],\n\t\t\tdefaultRepresentation: 'RGBA',\n\n\t\t\tcomponents: {\n\t\t\t\t// Main components\n\t\t\t\tpreview: true,\n\t\t\t\topacity: true,\n\t\t\t\thue: true,\n\n\t\t\t\t// Input / output Options\n\t\t\t\tinteraction: {\n\t\t\t\t\tinput: true,\n\t\t\t\t\tcancel: true,\n\t\t\t\t\tclear: true,\n\t\t\t\t\tsave: true,\n\t\t\t\t},\n\t\t\t},\n\t\t} ).on( 'save', function( color: any ) {\n\t\t\tif ( color ) {\n\t\t\t\tinput.val( color.toRGBA().toString( 0 ) );\n\t\t\t} else {\n\t\t\t\tinput.val( '' );\n\t\t\t}\n\n\t\t\tinput.change();\n\t\t\tpickr.hide();\n\t\t} );\n\n\t\tinput.data( 'pickr', pickr );\n\n\t\tpickr.setColorRepresentation( 'RGBA' );\n\t} );\n}\n","import $ from 'jquery';\nimport 'jqueryui';\n\n$( createWidgetTabs );\n$( document ).on( 'widget-updated twrpb-artblock-added twrpb-query-added', createWidgetTabs );\n\nfunction createWidgetTabs() {\n\t$( '.twrp-widget-components' ).tabs( {\n\t\tactive: 0,\n\t} );\n}\n","import $ from 'jquery';\nimport 'jqueryui';\n\ndeclare const ajaxurl: string;\n\n/**\n * Todo: Do not save widget if the query tabs are not displayed.\n * Todo: Block the select option while the article block is loading and waited\n * to be appended and display a nice animation.\n */\n\n// #region -- Declaring all constants.\n\nconst dataWidgetId = 'data-twrp-widget-id';\nconst dataQueryId = 'data-twrp-query-id';\nconst dataArtblockId = 'data-twrp-selected-artblock';\n\nconst queriesListSelector = '.twrp-widget-form__selected-queries-list';\nconst queriesItemSelector = '.twrp-widget-form__selected-query';\n\nconst queryAddSelector = '.twrp-widget-form__select-query-to-add-btn';\nconst queryRemoveSelector = '.twrp-widget-form__remove-selected-query';\n\nconst queriesInputSelector = '.twrp-widget-form__selected-queries';\n\nconst selectArticleBlockSelector = '.twrp-widget-form__article-block-selector';\n\nconst articleBlockSettingsContainerSelector = '.twrp-widget-form__article-block-settings-container';\n\n// #endregion -- Declaring all constants.\n\n// #region -- Add Queries.\n\n$( document ).on( 'click', queryAddSelector, handleAddQueryButton );\n\n/**\n * Handles the click when a user wants to add a query(tab) to be displayed and\n * modify its settings.\n */\nfunction handleAddQueryButton(): void {\n\tconst widgetWrapper = $( this ).closest( '.twrp-widget-form' );\n\tconst widgetId = widgetWrapper.attr( dataWidgetId );\n\tconst queryId = String( widgetWrapper.find( '.twrp-widget-form__select-query-to-add' ).val() );\n\n\taddQueryToListIfDoNotExist( widgetId, queryId );\n}\n\n/**\n * Appends a query tab to the widget list of queries. This function also updates\n * the queries input after a display query have been added.\n *\n */\nasync function addQueryToListIfDoNotExist( widgetId: string, queryId: string|number ) {\n\t// If query already exist in the list, then return. This check is here for\n\t// only to prevent a useless request to the server.\n\tif ( queryExistInList( widgetId, queryId ) ) {\n\t\treturn;\n\t}\n\n\tconst ajaxNonce = String( $( '#twrpb-plugin-widget-ajax-nonce' ).attr( 'data-twrpb-plugin-widget-ajax-nonce' ) );\n\n\t$.ajax( {\n\t\turl: ajaxurl,\n\t\tmethod: 'POST',\n\t\tdata: {\n\t\t\taction: 'twrp_widget_create_query_setting',\n\t\t\twidget_id: widgetId,\n\t\t\tquery_id: queryId,\n\t\t\tnonce: ajaxNonce,\n\t\t},\n\t} )\n\t\t.done(\n\t\t\tfunction( data ) {\n\t\t\t\t// We need another check here because this function can be\n\t\t\t\t// called and executed multiple times, because it can be called\n\t\t\t\t// from multiple events.\n\t\t\t\tif ( data.length >= 25 && ! queryExistInList( widgetId, queryId ) ) {\n\t\t\t\t\tconst widget = getWidgetWrapperById( widgetId );\n\t\t\t\t\tconst queriesList = widget.find( '.twrp-widget-form__selected-queries-list' );\n\t\t\t\t\tqueriesList.append( data );\n\t\t\t\t\tupdateQueriesInput( widgetId );\n\t\t\t\t\tmakeAllQueriesCollapsible();\n\t\t\t\t\tqueriesList.trigger( 'twrpb-query-added' );\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t.fail(\n\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\tfunction( data ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error( 'Something went wrong with the ajax callback in addQueryToListIfDoNotExist() function,' );\n\t\t\t}\n\t\t);\n}\n\n// #endregion -- Add Queries.\n\n// #region -- Remove Queries.\n\n$( document ).on( 'click', queryRemoveSelector, handleRemoveQuery );\n\n/**\n * Removes the query from Display List and Input List.\n */\nfunction handleRemoveQuery() {\n\tconst widgetId = getClosestWidgetId( $( this ) );\n\tconst queryId = getClosestQueryId( $( this ) );\n\n\tremoveQueryFromList( widgetId, queryId );\n\tupdateQueriesInput( widgetId );\n}\n\n/**\n * Remove a Query From the Display List.\n */\nfunction removeQueryFromList( widgetId: string, queryId: string|number ) {\n\tconst queryItem = getQueryItemById( widgetId, queryId );\n\tqueryItem.remove();\n}\n\n// #endregion -- Remove Queries.\n\n// #region -- Update Queries\n\n$( updateAllWidgetsListOnLoad );\n$( document ).on( 'widget-updated widget-added', updateAllWidgetsListOnLoad );\n\nfunction updateAllWidgetsListOnLoad(): void {\n\tconst widgets = getAllWidgets();\n\twidgets.each( function() {\n\t\tconst widget = $( this );\n\t\tconst widgetId = widget.attr( dataWidgetId );\n\t\tconst queries = getQueriesInputValues( widget );\n\n\t\tfor ( let i = 0; i < queries.length; i++ ) {\n\t\t\taddQueryToListIfDoNotExist( widgetId, queries[ i ] );\n\t\t}\n\n\t\tupdateQueriesInput( widgetId );\n\t} );\n}\n\n// #endregion -- Update Queries\n\n// #region -- Make Queries Sortable.\n\n$( initializeAllQueriesSorting );\n$( document ).on( 'widget-updated widget-added', initializeAllQueriesSorting );\n\nfunction initializeAllQueriesSorting(): void {\n\tconst widgets = getAllWidgets();\n\twidgets.each( function() {\n\t\tconst queriesList = $( this ).find( queriesListSelector );\n\t\tqueriesList.sortable( {\n\t\t\tupdate: handleSortingChange,\n\t\t} );\n\n\t\tfunction handleSortingChange(): void {\n\t\t\tconst widgetId = getClosestWidgetId( this );\n\t\t\tupdateQueriesInput( widgetId );\n\t\t}\n\t} );\n}\n\n// #endregion -- Make Queries Sortable.\n\n// #region -- Add/Remove/Update Queries Functions.\n\n/**\n * Check if a query settings are displayed in the widget.\n */\nfunction queryExistInList( widgetId: string, queryId: string|number ): boolean {\n\tconst queryItem = getQueryItemById( widgetId, queryId );\n\tif ( queryItem.length ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Updates the queries input, from the queries display list.\n *\n * This is the primary function that is used to update the queries input, based\n * on what is displayed.\n */\nfunction updateQueriesInput( widgetId: string ): void {\n\tconst widget = getWidgetWrapperById( widgetId );\n\tconst queriesItems = widget.find( queriesListSelector ).find( queriesItemSelector );\n\n\tconst queries = [];\n\tqueriesItems.each( function() {\n\t\tconst queryId = $( this ).attr( dataQueryId );\n\t\tif ( queryId ) {\n\t\t\tqueries.push( queryId );\n\t\t}\n\t} );\n\n\tconst input = widget.find( queriesInputSelector );\n\tconst value = queries.join( ';' );\n\tinput.val( value );\n}\n\n/**\n * Get an array of all query ids used in a widget.\n */\nfunction getQueriesInputValues( widget: JQuery<HTMLElement> ): Array<string> {\n\tconst queryInput = widget.find( queriesInputSelector );\n\tlet queries = String( queryInput.val() ).split( ';' );\n\tqueries = queries.filter( isNonEmptyString );\n\n\treturn queries;\n\n\tfunction isNonEmptyString( elem: string ): boolean {\n\t\treturn Boolean( elem );\n\t}\n}\n\n// #endregion -- Add/Remove/Update Queries Functions.\n\n// #region -- Make Queries Tab Collapsible.\n\n$( makeAllQueriesCollapsible );\n$( document ).on( 'widget-updated widget-added', makeAllQueriesCollapsible );\n\nfunction makeAllQueriesCollapsible() {\n\tconst widgets = getAllWidgets();\n\twidgets.each( function() {\n\t\tconst queryItems = $( this ).find( `[${ dataQueryId }]` );\n\n\t\tqueryItems.each( function() {\n\t\t\tconst query = $( this );\n\t\t\tconst accordionInstance = query.accordion( 'instance' );\n\n\t\t\tif ( accordionInstance ) {\n\t\t\t\tquery.accordion( 'refresh' );\n\t\t\t} else {\n\t\t\t\tquery.accordion( {\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\tactive: false,\n\t\t\t\t\theightStyle: 'content',\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t} );\n}\n\n// #endregion -- Make Queries Tab Collapsible.\n\n// #region -- Helper Functions.\n\nfunction getClosestWidgetId( element: any ): string {\n\treturn $( element ).closest( `[${ dataWidgetId }]` ).attr( dataWidgetId );\n}\n\nfunction getClosestQueryId( element: any ): string {\n\treturn $( element ).closest( `[${ dataQueryId }]` ).attr( dataQueryId );\n}\n\nfunction getWidgetWrapperById( widgetId: string ): JQuery<HTMLElement> {\n\treturn $( document ).find( `[${ dataWidgetId }=\"${ widgetId }\"]` );\n}\n\nfunction getQueryItemById( widgetId: string, queryId: string|number ): JQuery<HTMLElement> {\n\tconst widget = getWidgetWrapperById( widgetId );\n\treturn $( widget ).find( `[${ dataQueryId }=\"${ queryId }\"]` );\n}\n\n/**\n * Get all TWRP widgets.\n *\n * todo: remove the widget with the Id __i__.\n */\nfunction getAllWidgets(): JQuery {\n\treturn $( document ).find( `[${ dataWidgetId }]` );\n}\n\n// #endregion -- Helper Functions.\n\n// #region -- Manages The Changes Of Article Block Settings.\n\n// #region -- Insert The Article Block Settings.\n\n$( document ).on( 'change', selectArticleBlockSelector, handleArticleBlockChanged );\n\nasync function handleArticleBlockChanged() {\n\tconst widgetId = getClosestWidgetId( $( this ) );\n\tconst queryId = getClosestQueryId( $( this ) );\n\tconst artblockId = String( $( this ).val() );\n\n\t// add previous container to cache:\n\taddArticleBlockToCache( widgetId, queryId );\n\n\tlet artblockSettingsHTML;\n\tif ( hasArticleBlockInCache( widgetId, queryId, artblockId ) ) {\n\t\tartblockSettingsHTML = getArticleBlockFromCache( widgetId, queryId, artblockId );\n\t} else {\n\t\tartblockSettingsHTML = await getArticleBlockSettings( widgetId, queryId, artblockId );\n\t}\n\n\tinsertArticleBlock( widgetId, queryId, artblockSettingsHTML );\n}\n\n// todo: move the 2 bellow functions into one.\nfunction getArticleBlockSettings( widgetId: string, queryId: string|number, artblockId: string|number ) {\n\tconst ajaxNonce = String( $( '#twrpb-plugin-widget-ajax-nonce' ).attr( 'data-twrpb-plugin-widget-ajax-nonce' ) );\n\n\treturn $.ajax( {\n\t\turl: ajaxurl,\n\t\tmethod: 'POST',\n\t\tdata: {\n\t\t\taction: 'twrp_widget_create_artblock_settings',\n\t\t\tartblock_id: artblockId,\n\t\t\twidget_id: widgetId,\n\t\t\tquery_id: queryId,\n\t\t\tnonce: ajaxNonce,\n\t\t},\n\t} );\n}\n\nfunction insertArticleBlock( widgetId: string, queryId: string|number, html: string|JQuery ) {\n\tif ( ( ( typeof html ) === 'string' ) && html.length < 25 ) {\n\t\treturn;\n\t}\n\n\tconst queryItem = getQueryItemById( widgetId, queryId );\n\tconst artblockContainer = queryItem.find( articleBlockSettingsContainerSelector );\n\tartblockContainer.empty();\n\tartblockContainer.find( '[' + dataArtblockId + ']' ).detach();\n\tartblockContainer.append( html );\n\tartblockContainer.trigger( 'twrpb-artblock-added' );\n}\n\n// #endregion -- Insert The Article Block Settings.\n\n// #region -- Cache Article Block Settings.\n\n/**\n * An array that contains all the article blocks retrieved and detached.\n * When a user choose to reselect a previously selected and modified article\n * block, the settings will not be fetched again from the server and the\n * modifications will remain.\n */\nconst articleBlocksCache = Array();\n\n/**\n * Add the article block to the cache array.\n */\nfunction addArticleBlockToCache( widgetId: string, queryId: string|number ): void {\n\tif ( ( ! widgetId ) || ( ! queryId ) ) {\n\t\treturn;\n\t}\n\n\tif ( ! articleBlocksCache[ widgetId ] ) {\n\t\tarticleBlocksCache[ widgetId ] = [];\n\t}\n\tif ( ! articleBlocksCache[ widgetId ][ queryId ] ) {\n\t\tarticleBlocksCache[ widgetId ][ queryId ] = [];\n\t}\n\n\tconst query = getQueryItemById( widgetId, queryId );\n\tconst artblockWrapper = query.find( '[' + dataArtblockId + ']' );\n\tconst artblockId = artblockWrapper.attr( dataArtblockId );\n\n\tif ( ! artblockId ) {\n\t\treturn;\n\t}\n\n\tarticleBlocksCache[ widgetId ][ queryId ][ artblockId ] = artblockWrapper;\n}\n\n/**\n * Get an article block from cache. Or false if the article block is not in cache.\n */\nfunction getArticleBlockFromCache( widgetId: string, queryId: string|number, $artblockId: string|number ): JQuery<HTMLElement>|false {\n\tif ( hasArticleBlockInCache( widgetId, queryId, $artblockId ) ) {\n\t\treturn articleBlocksCache[ widgetId ][ queryId ][ $artblockId ];\n\t}\n\treturn false;\n}\n\n/**\n * Whether or not an article block was already fetched and put in cache.\n */\nfunction hasArticleBlockInCache( widgetId: string, queryId: string|number, $artblockId: string|number ): boolean {\n\tif ( ! articleBlocksCache[ widgetId ] || ! articleBlocksCache[ widgetId ][ queryId ] || ! articleBlocksCache[ widgetId ][ queryId ][ $artblockId ] ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n// #endregion -- Cache Article Block Settings.\n","/**\n * Works on: \"type\"=\"checkbox\", type=\"number\", type=\"hidden\", pickr color, select.\n */\n\nimport $ from 'jquery';\n\nconst widgetFormSelector = '.twrp-widget-form';\nconst queryTabSettingsSelector = '.twrp-widget-form__selected-query';\n\n// #region -- Update what widgets to sync.\n// The widgets that are marked to sync have twrp-widget-form--js-sync-settings class name.\n\n$( updateAllWidgetSyncClasses );\n$( document ).on( 'widget-updated widget-added', updateAllWidgetSyncClasses );\n$( document ).on( 'change', '[type=\"checkbox\"][name$=\"sync_query_settings]\"]', updateAllWidgetSyncClasses );\n\nfunction updateAllWidgetSyncClasses() {\n\tconst syncSetting = $( document ).find( '[type=\"checkbox\"][name$=\"sync_query_settings]\"]' );\n\tsyncSetting.each( function() {\n\t\tconst syncSettingValue = $( this ).prop( 'checked' );\n\t\tconst widget = $( this ).closest( widgetFormSelector );\n\t\tif ( syncSettingValue ) {\n\t\t\taddSyncClassToWidget( widget );\n\t\t} else {\n\t\t\tremoveSyncClassFromWidget( widget );\n\t\t}\n\t} );\n}\n\nfunction addSyncClassToWidget( widget ) {\n\twidget.addClass( 'twrp-widget-form--js-sync-settings' );\n}\n\nfunction removeSyncClassFromWidget( widget ) {\n\twidget.removeClass( 'twrp-widget-form--js-sync-settings' );\n}\n\n// #endregion -- Update what widgets to sync.\n\n// #region -- Sync the widget settings when the sync button is clicked.\n\n$( document ).on( 'change', '[type=\"checkbox\"][name$=\"sync_query_settings]\"]', handleSyncButtonEnabled );\n\nfunction handleSyncButtonEnabled() {\n\tconst settingEnabled = $( this ).prop( 'checked' );\n\n\tif ( settingEnabled ) {\n\t\tsyncAllWidgetSettings( $( this ).closest( widgetFormSelector ) );\n\t}\n}\n\n// #endregion -- Sync the widget settings when the sync button is clicked.\n\n// #region -- Sync all settings for a widget\n\n$( document ).on( 'twrpb-query-added twrpb-artblock-added', '.twrp-widget-form--js-sync-settings', handleQueryOrArtblockAdded );\n\nfunction handleQueryOrArtblockAdded() {\n\tconst widget = $( this );\n\tsyncAllWidgetSettings( widget );\n\n\t// Sometimes the pickr color won't sync because it gets update at the same time, so we force it.\n\tsetTimeout( function() {\n\t\tsyncAllWidgetSettings( widget );\n\t}, 100 );\n\n\tsetTimeout( function() {\n\t\tsyncAllWidgetSettings( widget );\n\t}, 1000 );\n}\n\n/**\n * Sync all query settings of the widget with the first query setting.\n */\nfunction syncAllWidgetSettings( widget: JQuery ): void {\n\tconst firstQuery = widget.find( queryTabSettingsSelector ).eq( 0 );\n\n\tconst toSyncElements = firstQuery.find( 'input, select' );\n\n\ttoSyncElements.each( function() {\n\t\tsyncElement( $( this ) );\n\t} );\n}\n\n// #endregion -- Sync all settings for a widget\n\n// #region -- Sync all equivalent query settings, if a setting change.\n\naddDocumentEvents();\nfunction addDocumentEvents() {\n\t$( document ).on( 'change', '.twrp-widget-form--js-sync-settings' + ' ' + queryTabSettingsSelector, syncTheSetting );\n}\n\nfunction removeDocumentEvents() {\n\t$( document ).off( 'change', '.twrp-widget-form--js-sync-settings' + ' ' + queryTabSettingsSelector, syncTheSetting );\n}\n\nfunction syncTheSetting( event ) {\n\tconst elementChanged = $( event.target );\n\tsyncElement( elementChanged );\n}\n\n// #endregion -- Sync all equivalent query settings, if a setting change.\n\n/**\n * For a setting control passed, sync the other similar query settings with\n * same value.\n */\nfunction syncElement( elementChanged: JQuery ) {\n\tconst elementName = elementChanged.attr( 'name' );\n\n\tconst shouldBeSynched = settingShouldBeSynched( elementChanged );\n\tif ( ! shouldBeSynched ) {\n\t\treturn;\n\t}\n\n\tconst allWidgetQueriesTabs = elementChanged.closest( widgetFormSelector ).find( queryTabSettingsSelector );\n\tconst nameSuffixToSearch = elementName.replace( /widget-twrp_tabs_with_recommended_posts\\[\\d+\\]\\[\\d+\\]/, '' );\n\n\tlet allSimilarQuerySettings = allWidgetQueriesTabs.find( '[name$=\"' + nameSuffixToSearch + '\"]' );\n\tallSimilarQuerySettings = filterSimilarQuerySettings( elementChanged, allSimilarQuerySettings );\n\n\tconst settingsChanged = changeAllSettings( elementChanged, allSimilarQuerySettings );\n\n\ttriggerNecessaryChanges( settingsChanged );\n\t// We don't need yet to trigger all changes.\n\t// triggerAllChanges( elementChanged, allSimilarQuerySettings );\n}\n\n/**\n * Whether or not it should sync this setting control.\n */\nfunction settingShouldBeSynched( settingControl ): boolean {\n\tif ( settingControl.is( '[name$=\"[display_title]\"]' ) ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n/**\n * Filter the similar settings found.\n *\n * Usually used on settings that have custom controllers.\n */\nfunction filterSimilarQuerySettings( settingElement: JQuery, allSimilarQuerySettings : JQuery ): JQuery {\n\tconst elementType = getElementChangedType( settingElement );\n\n\tif ( elementType === 'checkbox' ) {\n\t\tallSimilarQuerySettings = allSimilarQuerySettings.not( '[type=\"hidden\"]' );\n\t}\n\n\treturn allSimilarQuerySettings;\n}\n\n/**\n * Based on a setting control, change all other settings controls passed. This\n * function will return a list with all the controls that were changed(value\n * different than the based setting control).\n */\nfunction changeAllSettings( elementName: JQuery, allSimilarQuerySettings : JQuery ): JQuery {\n\tconst elementType = getElementChangedType( elementName );\n\tconst valueToChange = elementName.val();\n\tlet elementsChanged = $();\n\n\tallSimilarQuerySettings.each( function() {\n\t\tconst currentElement = $( this );\n\n\t\tif ( elementType === 'checkbox' ) {\n\t\t\tconst propValue = elementName.prop( 'checked' );\n\t\t\tconst currentSetting = currentElement.prop( 'checked' );\n\t\t\tif ( propValue !== currentSetting ) {\n\t\t\t\telementsChanged = elementsChanged.add( currentElement );\n\t\t\t\tcurrentElement.prop( 'checked', propValue );\n\t\t\t}\n\t\t} else if ( elementType === 'select' || elementType === 'number' || elementType === 'hidden' ) {\n\t\t\tconst currentValue = currentElement.val();\n\t\t\tif ( valueToChange !== currentValue ) {\n\t\t\t\telementsChanged = elementsChanged.add( currentElement );\n\t\t\t\tcurrentElement.val( valueToChange );\n\t\t\t}\n\t\t} else if ( elementType === 'color' ) {\n\t\t\tconst currentValue = currentElement.val();\n\t\t\tif ( valueToChange !== currentValue ) {\n\t\t\t\telementsChanged = elementsChanged.add( currentElement );\n\t\t\t\tcurrentElement.val( valueToChange );\n\t\t\t}\n\n\t\t\t// This is left outside, because we can refresh the button display\n\t\t\t// in case the pickr initialize slower.\n\t\t\tif ( valueToChange && ( typeof valueToChange === 'string' ) ) {\n\t\t\t\tcurrentElement.next( '.pickr' ).children( 'button' ).css( 'color', valueToChange );\n\t\t\t} else {\n\t\t\t\tcurrentElement.next( '.pickr' ).children( 'button' ).css( 'color', 'rgba(0, 0, 0, 0.15)' );\n\t\t\t}\n\t\t}\n\t} );\n\n\treturn elementsChanged;\n}\n\n/**\n * Trigger the changes only to elements that have other javascript calls to them.\n */\nfunction triggerNecessaryChanges( settingControlsToTriggerChanges:JQuery ): void {\n\tlet triggerChanges = false;\n\tconst firstControl = settingControlsToTriggerChanges.eq( 0 );\n\n\t// See whether or not we should trigger changes.\n\tconst elementName = String( firstControl.attr( 'name' ) );\n\tif ( elementName.includes( '[article_block]' ) ) {\n\t\ttriggerChanges = true;\n\t}\n\n\tif ( triggerChanges ) {\n\t\tremoveDocumentEvents();\n\t\tsettingControlsToTriggerChanges.each( function() {\n\t\t\t$( this ).trigger( 'change' );\n\t\t} );\n\t\taddDocumentEvents();\n\t}\n}\n\n/**\n * Trigger all the changes done to all elements.\n */\nfunction triggerAllChanges( elementName: JQuery, allSimilarQuerySettings : JQuery ): void {\n\tremoveDocumentEvents();\n\tconst elementType = getElementChangedType( elementName );\n\tallSimilarQuerySettings.each( function() {\n\t\tif ( elementType === 'checkbox' ) {\n\t\t\t$( this ).trigger( 'change' );\n\t\t} else if ( elementType === 'select' ) {\n\t\t\t$( this ).trigger( 'change' );\n\t\t} else if ( elementType === 'number' ) {\n\t\t\t$( this ).trigger( 'change' );\n\t\t} else if ( elementType === 'hidden' ) {\n\t\t\t$( this ).trigger( 'change' );\n\t\t} else if ( elementType === 'color' ) {\n\t\t\t$( this ).trigger( 'change' );\n\t\t}\n\t} );\n\taddDocumentEvents();\n}\n\n/**\n * Get the input type that is changed.\n *\n * The additional check on hidden type is because the checkboxes can have a\n * hidden input before, to submit something to the server.\n */\nfunction getElementChangedType( settingElement ): string {\n\tif ( settingElement.attr( 'type' ) === 'hidden' && settingElement.next( '.pickr, .twrp-color-picker' ).length ) {\n\t\treturn 'color';\n\t} else if ( settingElement.attr( 'type' ) === 'hidden' && settingElement.next( '[type=\"checkbox\"]' ).length === 0 ) {\n\t\treturn 'hidden';\n\t} else if ( settingElement.attr( 'type' ) === 'checkbox' ) {\n\t\treturn 'checkbox';\n\t} else if ( settingElement.is( 'select' ) ) {\n\t\treturn 'select';\n\t} else if ( settingElement.attr( 'type' ) === 'number' ) {\n\t\treturn 'number';\n\t}\n}\n"]}