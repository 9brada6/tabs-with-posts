{"version":3,"sources":["node_modules/browser-pack/_prelude.js","script.js","assets/src-backend/common-blocks/twrp-cat-settings/twrp-cat-settings.ts","assets/src-backend/common-blocks/twrp-collapsible/twrp-collapsible.ts","assets/src-backend/common-blocks/twrp-comments-settings/twrp-comments-settings.ts","assets/src-backend/common-blocks/twrp-date-settings/twrp-date-settings.ts","assets/src-backend/common-blocks/twrp-meta-setting/twrp-meta-setting.ts","assets/src-backend/common-blocks/twrp-order-setting/twrp-order-setting.ts","assets/src-backend/common-blocks/twrp-posts-settings/twrp-posts-settings.ts","assets/src-backend/documentation-page/twrpb-documentation-page.ts","assets/src-backend/framework-blocks/twrp-hidden/twrp-hidden.ts","assets/src-backend/general-settings/twrpb-general-settings.ts","assets/src-backend/query-settings/twrpb-advanced-args/twrpb-advanced-args.ts","assets/src-backend/query-settings/twrpb-author-settings/twrpb-author-settings.ts","assets/src-backend/query-settings/twrpb-search-setting/twrpb-search-setting.ts","assets/src-backend/query-settings/twrpb-statuses-settings/twrpb-statuses-settings.ts","assets/src-backend/script.ts","assets/src-backend/widget-blocks/twrp-color-picker.ts","assets/src-backend/widget-blocks/twrp-widget-components.ts","assets/src-backend/widget-blocks/twrp-widget-form.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","global","__importDefault","this","mod","__esModule","default","Object","defineProperty","value","jquery_1","window","twrp_hidden_1","categorySelector","categoriesInput","categoryIdAttrName","categoriesItemsWrapper","categoriesEmptyMessage","find","categoryItem","hideOrShowEmptyMessage","showLeft","hideLeft","document","on","categoryId","val","name","sanitizeCategoryName","text","newValue","oldValue","split","indexOf","categoryIdInsertedInInput","addCatToInput","items","sameIdFound","each","attr","categoryItemIsDisplayed","toAppend","clone","removeButtonAriaLabel","ariaLabel","getRemoveButtonAriaLabel","replace","append","addCatToVisual","String","closest","toRemove","removeAttr","removeCategoryFromDisplay","categoryIds","toRemoveCategoryIndex","splice","join","removeCategoryFromInput","sortable","placeholder","stop","refreshInputtedCategories","categoryTypeSelect","categoryRelationWrapper","mainCategorySettings","trim","categoriesItems","categoriesIds","catId","selectVal","hideUp","is","show","showUp","hide","self","../../framework-blocks/twrp-hidden/twrp-hidden","2","element","activeTabIndex","accordion","active","heightStyle","collapsible","icons","3","selectCommentsComparator","numCommentsInput","hideOrShowCommentsNumberInput","4","after","before","input","createElement","notADateValue","setAttribute","options","dateFormat","changeMonth","changeYear","datepicker","selectDateType","lastPeriodWrapper","betweenPeriodWrapper","hideOrShowLastPeriodSettings","hideOrShowBetweenTimeSettings","5","metaTypeSelector","metaValueSelector","showOrHideValueInput","metaTypeValue","6","firstOrderGroup","secondOrderGroup","thirdOrderGroup","orderByClassName","orderGroups","hideOrShowUnnecessarySelectors","hideNext","selectedVal","j","orderBySelect","nextSelectedVal","trigger","7","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","apply","__generator","body","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","postTypeSelect","postVisualList","searchingWrapper","hideOrShowVisualList","postsSearchInput","showSearchedPosts","request","sendToControl","wpApiURL","fetchUrl","posts","postsToSend","_a","wpApiSettings","root","versionString","term","fetch","json","Array","console","error","decodeHtml","title","id","autocomplete","source","minLength","postsIdsInput","postIdAttrName","postVisualItem","addPost","postExistInVisualList","newAuthorItem","removeButtonLabel","_addPostToVisualList","inputVal","Number","map","mapToInt","parseInt","postExistInHiddenInput","previousVal","newVal","_addPostToHiddenInput","removeOrAddNoPostsText","autocompleteInstance","selectedItem","event","keyCode","which","preventDefault","itemToRemove","_removePostFromVisualList","currentValue","postsIds","indexOfId","_removePostFromHiddenInput","removePost","noPostsText","updatePostsIdsFromVisualList","postItems","filter","authorsIds","itemId","html","8","spoilerWrapper","parent","toggleDisplay","../framework-blocks/twrp-hidden/twrp-hidden","9","effectDuration","slideUp","duration","complete","addHideClass","slideDown","removeHideClass","addClass","removeClass","css","hasClass","remove","completeFunction","removeElement","effect","direction","hideFirst","10","showOrHideCustomDateFormat","humanReadableEnabledCheckbox","customDateWrapper","iconWrapperClassName","iconAndSvgElem","selectNames","updateIcon","selectName","selectElem","selectWrapper","iconId","insertBefore","_i","selectNames_1","documentOnClickSelector","selectNames_2","getDocumentOnClickSelector","iconsPreviewWrapperClassName","ratingIconAndSvgElem","ratingIconsSet","updateRatingIcons","dataHolderElement","toParse","JSON","parse","setRatingIconsData","selectedRatingPack","emptyIconId","empty","halfFilledIconId","half","filledIconId","full","prepend","iconsWrapperPreviewElement","appendTo","selectCommentIconSelector","selectDisabledCommentIconSelector","compatibleDisabledComments","autoSelectIconSwitchName","doDisabledCommentIconAutoSelect","setCommentsData","commentId","compatibleDisabledCommentIconId","enableOrDisableIconSelect","isEnableAutoSelect","enableIconSelector","firstTime","prop","removeProp","11","getElementById","CodeMirror","fromTextArea","mode","theme","indentUnit","indentWithTabs","lineNumbers","autoRefresh","12","authorTypeSelector","authorSearchWrap","authorToHideList","authorTypeVal","sameAuthorNotice","handleSameAuthorNotice","authorSearchInput","showSearchedUsers","allUsers","wp","api","collections","Users","usersFound","updateCategories","name_1","models","attributes","data","_fields","search","once","authorsIdsInput","authorsVisualList","ariaLabelDataAttr","authorVisualItem","authorIdAttrName","addAuthor","authorExistInVisualList","removeBtnAriaLabel","_addAuthorToVisualList","authorExistInHiddenInput","_addAuthorToHiddenInput","removeOrAddNoAuthorsText","_removeAuthorFromVisualList","_removeAuthorFromHiddenInput","removeAuthor","noAuthorsText","updateAuthorsIdsFromVisualList","authorItems","13","searchInput","warningWrapper","hiderOrShowSearchWarning","searchStringLength","14","applySettingSelect","postStatuses","hideOrShowPostStatuses","15","./common-blocks/twrp-cat-settings/twrp-cat-settings","./common-blocks/twrp-collapsible/twrp-collapsible","./common-blocks/twrp-comments-settings/twrp-comments-settings","./common-blocks/twrp-date-settings/twrp-date-settings","./common-blocks/twrp-meta-setting/twrp-meta-setting","./common-blocks/twrp-order-setting/twrp-order-setting","./common-blocks/twrp-posts-settings/twrp-posts-settings","./documentation-page/twrpb-documentation-page","./framework-blocks/twrp-hidden/twrp-hidden","./general-settings/twrpb-general-settings","./query-settings/twrpb-advanced-args/twrpb-advanced-args","./query-settings/twrpb-author-settings/twrpb-author-settings","./query-settings/twrpb-search-setting/twrpb-search-setting","./query-settings/twrpb-statuses-settings/twrpb-statuses-settings","./widget-blocks/twrp-color-picker","./widget-blocks/twrp-icon-select-preview","./widget-blocks/twrp-widget-components","./widget-blocks/twrp-widget-form","16","pickr","Pickr","create","el","container","appClass","swatches","defaultRepresentation","components","preview","opacity","hue","interaction","cancel","clear","save","color","toRGBA","toString","change","setColorRepresentation","17","18","tabs","19","dataWidgetId","dataQueryId","dataArtblockId","queriesListSelector","queriesInputSelector","artblockSettingsWrapperSelector","widgetWrapper","widgetId","queryId","queriesInputValue","getQueriesInputValues","setQueriesInputValues","queryExistInList","appendQueryToList","getClosestWidgetId","getClosestQueryId","getQueryItemById","removeQueryFromList","updateQueriesInput","widgets","updateWidgetsList","updateAllWidgetsListOnLoad","widget","getWidgetWrapperById","queries","updateQueriesDisplayListFromInput","queriesItems","queryHTML","queriesList","getQueryHTMLForList","ajax","url","ajaxurl","method","action","widget_id","query_id","queryInput","elem","Boolean","handleSortingChange","makeAllQueriesCollapsible","makeQueryCollapsible","query","getArticleBlockSettings","artblockId","hasArticleBlockInCache","$artblockId","articleBlocksCache","getArticleBlockFromCache","artblock_id","queryList","queryItems","queriesIds","detach","eq","reorderQueriesDisplayList","update","type","artblockSettingsHTML","queryItem","artblockSettingsWrapper","artblockContainer","artblockWrapper","addArticleBlockToCache","insertArticleBlock"],"mappings":"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","file":"script.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",null,"import $ from 'jquery';\nimport 'jqueryui';\nimport { showUp, hideUp, showLeft, hideLeft } from '../../framework-blocks/twrp-hidden/twrp-hidden';\n\n// #region -- Defining some global variables.\n\nconst categorySelector = $( '#twrp-cat-settings__js-cat-dropdown' );\n\nconst categoriesInput = $( '#twrp-cat-settings__cat-ids' );\n\nconst categoryIdAttrName = 'data-cat-id';\n\nconst categoriesItemsWrapper = $( '#twrp-cat-settings__cat-list-wrap' );\nconst categoriesEmptyMessage = categoriesItemsWrapper.find( '.twrp-display-list__empty-msg' );\nconst categoryItem = $(\n\t'<div class=\"twrp-display-list__item twrp-cat-settings__cat-list-item\">' +\n\t\t'<div class=\"twrp-display-list__item-name twrp-cat-settings__cat-item-name\">' +\n\t\t'</div>' +\n\t\t'<button class=\"twrp-display-list__item-remove-btn twrp-cat-settings__cat-remove-btn\" type=\"button\"><span class=\"dashicons dashicons-no\"></span></button>' +\n\t'</div>'\n);\n\n// #endregion -- Defining some global variables.\n\n// #region -- Add a categories on the lists.\n\n$( document ).on( 'click', '#twrp-cat-settings__add-cat-btn', handleAddCategoryButton );\n\n/**\n * Handle the addition of a new category via the button click.\n */\nfunction handleAddCategoryButton(): void {\n\tconst categoryId: any = categorySelector.find( ':selected' ).val();\n\tconst name = sanitizeCategoryName( categorySelector.find( ':selected' ).text() );\n\n\tif ( categoryId > 0 ) {\n\t\taddCatToInput( categoryId );\n\t\taddCatToVisual( categoryId, name );\n\t}\n}\n\n/**\n * Add a category to the hidden input.\n */\nfunction addCatToInput( categoryId: string|number ): void {\n\tconst oldValue = categoriesInput.val();\n\n\tlet newValue: string|number;\n\tif ( oldValue && categoryId ) {\n\t\tnewValue = oldValue + ';' + categoryId;\n\t} else {\n\t\tnewValue = categoryId;\n\t}\n\n\tif ( ! categoryIdInsertedInInput( categoryId ) ) {\n\t\tcategoriesInput.val( newValue );\n\t}\n}\n\n/**\n * Adds a category to visual list.\n */\nfunction addCatToVisual( categoryId: string|number, name: string ): void {\n\tif ( ! categoryItemIsDisplayed( categoryId ) ) {\n\t\tconst toAppend = categoryItem.clone();\n\t\tconst removeButtonAriaLabel = getRemoveButtonAriaLabel().replace( '%s', sanitizeCategoryName( name ) );\n\n\t\ttoAppend.find( '.twrp-cat-settings__cat-item-name' ).text( sanitizeCategoryName( name ) );\n\t\ttoAppend.find( '.twrp-display-list__item-remove-btn' ).attr( 'aria-label', removeButtonAriaLabel );\n\t\ttoAppend.attr( categoryIdAttrName, categoryId );\n\n\t\tcategoriesItemsWrapper.append( toAppend );\n\t\thideOrShowEmptyMessage();\n\t\tshowLeft( toAppend, 'hide_first' );\n\t}\n}\n\n// #endregion -- add a categories on the lists.\n\n// #region -- Removing categories.\n\n$( document ).on( 'click', '.twrp-cat-settings__cat-remove-btn', handleRemoveCategory );\n\n/**\n * Removes a selected category when a button is clicked.\n */\nfunction handleRemoveCategory( this:JQuery ): void {\n\tconst categoryId = String( $( this ).closest( '[' + categoryIdAttrName + ']' ).attr( categoryIdAttrName ) );\n\tremoveCategoryFromDisplay( categoryId );\n\tremoveCategoryFromInput( categoryId );\n}\n\n/**\n * Removes a category from the display list with the categories.\n */\nfunction removeCategoryFromDisplay( categoryId: string|number ): void {\n\tconst toRemove = categoriesItemsWrapper.find( '[' + categoryIdAttrName + '=\"' + categoryId + '\"]' );\n\ttoRemove.removeAttr( categoryIdAttrName );\n\thideOrShowEmptyMessage();\n\thideLeft( toRemove, 'remove' );\n}\n\n/**\n * Removes a category from the hidden input.\n */\nfunction removeCategoryFromInput( categoryId: string|number ): void {\n\tconst categoryIds = String( categoriesInput.val() ).split( ';' );\n\tconst toRemoveCategoryIndex = categoryIds.indexOf( String( categoryId ) );\n\n\tif ( toRemoveCategoryIndex !== -1 ) {\n\t\tcategoryIds.splice( toRemoveCategoryIndex, 1 );\n\t\tcategoriesInput.val( categoryIds.join( ';' ) );\n\t}\n}\n\n// #endregion -- Removing categories.\n\n// #region -- Show or Hide empty message.\n\nfunction hideOrShowEmptyMessage(): void {\n\t_showEmptyMessageIfNecessary();\n\t_hideEmptyMessageIfNecessary();\n}\n\n/**\n * Show the empty list message, that should be displayed when no items exists.\n */\nfunction _showEmptyMessageIfNecessary(): void {\n\tconst listHaveItems = ( categoriesItemsWrapper.find( '[' + categoryIdAttrName + ']' ).length > 0 );\n\n\tif ( ! listHaveItems ) {\n\t\tshowLeft( categoriesEmptyMessage );\n\t}\n}\n\n/**\n * Hide the empty list message, that should not be displayed when at least an\n * item exists.\n */\nfunction _hideEmptyMessageIfNecessary(): void {\n\tconst listHaveItems = ( categoriesItemsWrapper.find( '[' + categoryIdAttrName + ']' ).length > 0 );\n\n\tif ( listHaveItems ) {\n\t\thideLeft( categoriesEmptyMessage );\n\t}\n}\n\n// #endregion -- Show or Hide empty message.\n\n// #region -- Verify if a category is selected.\n\n/**\n * Check to see if a category item is displayed in the Visual List of categories.\n */\nfunction categoryItemIsDisplayed( categoryId: string|number ): boolean {\n\tconst items = categoriesItemsWrapper.find( '.twrp-cat-settings__cat-list-item' );\n\n\tlet sameIdFound = false;\n\n\titems.each( function() {\n\t\tif ( categoryId === $( this ).attr( categoryIdAttrName ) ) {\n\t\t\tsameIdFound = true;\n\t\t}\n\t} );\n\n\tif ( sameIdFound ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Check to see if the category Id is found in the hidden input.\n */\nfunction categoryIdInsertedInInput( categoryId: string|number ): boolean {\n\tconst value: any = categoriesInput.val();\n\tif ( ! value ) {\n\t\treturn false;\n\t}\n\tconst categoryIds = value.split( ';' );\n\n\tif ( categoryIds.indexOf( categoryId ) !== -1 ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n// #endregion -- Verify if a category is selected.\n\n// #region -- Make The Categories Sortable.\n\n$( makeItemsSortable );\n\nfunction makeItemsSortable(): void {\n\tcategoriesItemsWrapper.sortable( {\n\t\tplaceholder: 'twrp-display-list__placeholder',\n\t\tstop: refreshInputtedCategories,\n\t} );\n}\n\n// #endregion -- Make The Categories Sortable.\n\n// #region -- Show/Hide Select For Category Relation.\n\nconst categoryTypeSelect = $( '#twrp-cat-settings__type' );\nconst categoryRelationWrapper = $( '#twrp-cat-settings__js-select-relation-wrap' );\nconst mainCategorySettings = $( '#twrp-cat-settings__js-settings-wrapper' );\n\n// todo: uncomment document.ready.\n// $( hideOrShowCategorySettings );\n$( document ).on( 'change', '#twrp-cat-settings__type', hideOrShowCategorySettings );\n\nfunction hideOrShowCategorySettings(): void {\n\tconst selectVal = categoryTypeSelect.val();\n\n\tif ( 'NA' === selectVal ) {\n\t\thideUp( mainCategorySettings );\n\t\thideUp( categoryRelationWrapper );\n\t} else if ( 'IN' === selectVal ) {\n\t\tif ( categoryRelationWrapper.is( ':hidden' ) ) {\n\t\t\tcategoryRelationWrapper.show();\n\t\t\tshowUp( mainCategorySettings );\n\t\t\tcategoryRelationWrapper.hide();\n\t\t} else {\n\t\t\tshowUp( mainCategorySettings );\n\t\t}\n\t\tshowUp( categoryRelationWrapper );\n\t} else {\n\t\tshowUp( mainCategorySettings );\n\t\thideUp( categoryRelationWrapper );\n\t}\n}\n\n// #endregion -- Show/Hide Select For Category Relation.\n\n// #region -- Helpers\n\n/**\n * Get the aria label for the remove button. In the aria label will be present\n * \"%s\", which will need to be replaced with an author.\n */\nfunction getRemoveButtonAriaLabel(): string {\n\tconst ariaLabel = categoriesItemsWrapper.attr( 'data-twrp-aria-remove-label' );\n\tif ( ! ariaLabel ) {\n\t\treturn '';\n\t}\n\n\treturn ariaLabel;\n}\n\n/**\n * Take out the number of counts and trim the name.\n */\nfunction sanitizeCategoryName( name: string ): string {\n\tconst removeCountParenthesisRegex = /\\([^(]*\\)$/;\n\tname = name.replace( removeCountParenthesisRegex, '' );\n\tname = name.trim();\n\n\treturn name;\n}\n\n// #endregion -- Helpers\n\n// #region -- Refresh Display/Hidden input categories.\n\n/**\n * Refresh the hidden input categories, with Ids taken from the visual list.\n */\nfunction refreshInputtedCategories(): void {\n\tconst categoriesItems = categoriesItemsWrapper.find( '.twrp-cat-settings__cat-list-item' );\n\n\tlet categoriesIds = '';\n\tcategoriesItems.each( function() {\n\t\tconst catId = String( $( this ).attr( categoryIdAttrName ) );\n\t\tif ( ! categoriesIds ) {\n\t\t\tcategoriesIds = catId;\n\t\t} else {\n\t\t\tcategoriesIds += ';' + catId;\n\t\t}\n\t} );\n\n\tcategoriesInput.val( categoriesIds );\n}\n\n// #endregion -- Refresh Display/Hidden input categories.\n","import $ from 'jquery';\nimport 'jqueryui';\n\n$( enableCollapsibleSettings );\n\nfunction enableCollapsibleSettings() {\n\t$( '.twrp-collapsible' ).each( function() {\n\t\tconst element = $( this );\n\t\tconst activeTabIndex = ( element.attr( 'data-twrp-is-collapsed' ) === '1' ) ? 0 : false;\n\n\t\telement.accordion( {\n\t\t\tactive: activeTabIndex,\n\t\t\theightStyle: 'content',\n\t\t\tcollapsible: true,\n\t\t\ticons: false,\n\t\t} );\n\t} );\n}\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp } from '../../framework-blocks/twrp-hidden/twrp-hidden';\n\nconst selectCommentsComparator = $( '#twrp-comments-settings__js-comparator' );\n\nconst numCommentsInput = $( '#twrp-comments-settings__js-num_comments' );\n\n$( hideOrShowCommentsNumberInput );\n$( document ).on( 'change', '#twrp-comments-settings__js-comparator', hideOrShowCommentsNumberInput );\n\nfunction hideOrShowCommentsNumberInput() {\n\tconst comparator = selectCommentsComparator.val();\n\n\tif ( 'NA' === comparator ) {\n\t\thideUp( numCommentsInput );\n\t} else {\n\t\tshowUp( numCommentsInput );\n\t}\n}\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp } from '../../framework-blocks/twrp-hidden/twrp-hidden';\n\n// #region -- Polyfill Datepicker\n\nconst after = $( '#twrp-date-settings__after' );\n\nconst before = $( '#twrp-date-settings__before' );\n\n$( enableDatePickerIfNecessary );\n\nfunction enableDatePickerIfNecessary() {\n\tif ( inputDateTypeIsAvailable() ) {\n\t\treturn;\n\t}\n\n\tconst options = {\n\t\tdateFormat: 'yy-mm-dd',\n\t\tchangeMonth: true,\n\t\tchangeYear: true,\n\t};\n\n\tafter.datepicker( options );\n\tbefore.datepicker( options );\n}\n\nfunction inputDateTypeIsAvailable() {\n\tconst input = document.createElement( 'input' );\n\tconst notADateValue = 'not-a-date';\n\n\tinput.setAttribute( 'type', 'date' );\n\tinput.setAttribute( 'value', notADateValue );\n\n\treturn ( input.value !== notADateValue );\n}\n\n// #endregion -- Polyfill Datepicker\n\n// #region -- Hide/Show Date\n\nconst selectDateType = $( '#twrp-date-settings__js-date-type' );\n\nconst lastPeriodWrapper = $( '#twrp-date-settings__js-last-period-wrapper' );\n\nconst betweenPeriodWrapper = $( '#twrp-date-settings__js-between-wrapper' );\n\n$( hideOrShowLastPeriodSettings );\n$( document ).on( 'change', '#twrp-date-settings__js-date-type', hideOrShowLastPeriodSettings );\n\n$( hideOrShowBetweenTimeSettings );\n$( document ).on( 'change', '#twrp-date-settings__js-date-type', hideOrShowBetweenTimeSettings );\n\nfunction hideOrShowLastPeriodSettings() {\n\tconst selectedType = selectDateType.val();\n\n\tif ( 'LT' === selectedType ) {\n\t\tshowUp( lastPeriodWrapper );\n\t} else {\n\t\thideUp( lastPeriodWrapper );\n\t}\n}\n\nfunction hideOrShowBetweenTimeSettings() {\n\tconst selectedType = selectDateType.val();\n\n\tif ( 'FT' === selectedType ) {\n\t\tshowUp( betweenPeriodWrapper );\n\t} else {\n\t\thideUp( betweenPeriodWrapper );\n\t}\n}\n\n// #endregion -- Hide/Show Date\n","import $ from 'jquery';\nimport { showUp, hideUp } from '../../framework-blocks/twrp-hidden/twrp-hidden';\n\nconst metaTypeSelector = '#twrp-meta-setting__js-meta-type';\nconst metaValueSelector = '#twrp-meta-setting__js-meta-value';\n\n$( showOrHideValueInput );\n$( document ).on( 'change', metaTypeSelector, showOrHideValueInput );\n\nfunction showOrHideValueInput() {\n\tconst metaTypeValue = $( metaTypeSelector ).val();\n\n\tif ( metaTypeValue === 'NOT EXISTS' || metaTypeValue === 'EXISTS' ) {\n\t\thideUp( $( metaValueSelector ) );\n\t} else {\n\t\tshowUp( $( metaValueSelector ) );\n\t}\n}\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp } from '../../framework-blocks/twrp-hidden/twrp-hidden';\n\nconst firstOrderGroup = $( '#twrp-order-setting__js-first-order-group' );\nconst secondOrderGroup = $( '#twrp-order-setting__js-second-order-group' );\nconst thirdOrderGroup = $( '#twrp-order-setting__js-third-order-group' );\n\nconst orderByClassName = 'twrp-order-setting__js-orderby';\n\nconst orderGroups = [ firstOrderGroup, secondOrderGroup, thirdOrderGroup ];\n\n$( hideOrShowUnnecessarySelectors );\n\n$( document ).on( 'change', `.${ orderByClassName }`, hideOrShowUnnecessarySelectors );\n\n/**\n * Hide or show the next selectors for the order by and order type, making the\n * user experience better.\n */\nfunction hideOrShowUnnecessarySelectors() {\n\tlet hideNext = false;\n\n\tfor ( let i = 0; i < orderGroups.length; i++ ) {\n\t\tif ( hideNext ) {\n\t\t\thideUp( orderGroups[ i ] );\n\t\t} else {\n\t\t\tshowUp( orderGroups[ i ] );\n\t\t}\n\n\t\tif ( orderGroups[ i ].find( `.${ orderByClassName }` ).val() === 'not_applied' ) {\n\t\t\thideNext = true;\n\t\t\thideUp( orderGroups[ i ].find( '.twrp-order-setting__js-order-type' ) );\n\t\t} else {\n\t\t\tshowUp( orderGroups[ i ].find( '.twrp-order-setting__js-order-type' ) );\n\t\t}\n\t}\n}\n\n$( document ).on( 'change', `.${ orderByClassName }`, hideOrShowSelectedValues );\n\nfunction hideOrShowSelectedValues() {\n\tfor ( let i = 0; i < orderGroups.length; i++ ) {\n\t\torderGroups[ i ].find( 'option' ).removeAttr( 'disabled' );\n\t}\n\n\tfor ( let i = 0; i < orderGroups.length; i++ ) {\n\t\tconst selectedVal = orderGroups[ i ].find( `.${ orderByClassName }` ).val();\n\t\tif ( selectedVal !== 'not_applied' ) {\n\t\t\tfor ( let j = i + 1; j < orderGroups.length; j++ ) {\n\t\t\t\tconst orderBySelect = orderGroups[ j ].find( `.${ orderByClassName }` );\n\t\t\t\tconst nextSelectedVal = orderBySelect.val();\n\n\t\t\t\torderBySelect.find( `[value=\"${ selectedVal }\"]` ).attr( 'disabled', 'disabled' );\n\n\t\t\t\tif ( nextSelectedVal === selectedVal ) {\n\t\t\t\t\torderBySelect.val( 'not_applied' );\n\t\t\t\t\torderBySelect.trigger( 'change' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp, hideLeft, showLeft } from '../../framework-blocks/twrp-hidden/twrp-hidden';\n\ndeclare const wpApiSettings: any;\n\n// #region -- Show/Hide Posts List.\n\nconst postTypeSelect = $( '#twrp-posts-settings__js-filter-type' );\n\nconst postVisualList = $( '#twrp-posts-settings__js-posts-list' );\n\nconst searchingWrapper = $( '#twrp-posts-settings__js-posts-search-wrap' );\n\n$( hideOrShowVisualList );\n$( document ).on( 'change', '#twrp-posts-settings__js-filter-type', hideOrShowVisualList );\n\n/**\n * Hide or show the visual list and the form input to search for users.\n */\nfunction hideOrShowVisualList() {\n\tconst authorTypeVal = postTypeSelect.val();\n\n\tif ( 'NA' === authorTypeVal ) {\n\t\thideUp( searchingWrapper );\n\t\thideUp( postVisualList );\n\t} else {\n\t\tshowUp( searchingWrapper );\n\t\tshowUp( postVisualList );\n\t}\n}\n\n// #endregion -- Show/Hide Posts List.\n\n// #region -- Manage Posts Search\n\n/**\n * The search input where administrators will search for posts.\n */\nconst postsSearchInput = $( '#twrp-posts-settings__js-posts-search' );\n\n$( initializeAutoComplete );\n\n/**\n * Initialize the search input, when a user enter some characters, it will\n * automatically search and display the options.\n */\nfunction initializeAutoComplete() {\n\tpostsSearchInput.autocomplete( {\n\t\tsource: showSearchedPosts,\n\t\tminLength: 2,\n\t} );\n}\n\n/**\n * Search for the posts and append the results into the autocomplete selector.\n */\nasync function showSearchedPosts( request: any, sendToControl: CallableFunction ) {\n\tconst wpApiURL = wpApiSettings.root + wpApiSettings.versionString;\n\tconst fetchUrl = wpApiURL + `search?_fields=id,title&search=${ request.term }&page=1&per_page=10`;\n\tconst fetchedResult = await fetch( fetchUrl );\n\tconst posts = await fetchedResult.json();\n\n\tif ( ! ( posts instanceof Array ) ) {\n\t\tconsole.error( 'TWRP error when fetching posts.' ); // eslint-disable-line\n\t}\n\n\tconst postsToSend = [];\n\tfor ( let i = 0; i < posts.length; i++ ) {\n\t\tpostsToSend.push( {\n\t\t\tvalue: decodeHtml( posts[ i ].title ),\n\t\t\tlabel: decodeHtml( posts[ i ].title ),\n\t\t\tid: posts[ i ].id,\n\t\t} );\n\t}\n\tsendToControl( postsToSend );\n}\n\n// #endregion -- Manage Posts Search\n\n// #region -- Add Post.\n\nconst postsIdsInput = $( '#twrp-posts-settings__js-posts-ids' );\n\n/**\n * The post attribute name that hold the Id of a visual item.\n */\nconst postIdAttrName = 'data-post-id';\n\n/**\n * The template for a post item, to be appended to the visual list. Note that\n * we have a similar template in the PHP file, so a change here will require\n * also a change there, and vice-versa.\n */\nconst postVisualItem = $(\n\t'<div class=\"twrp-display-list__item twrp-posts-settings__post-item\">' +\n\t\t'<div class=\"twrp-posts-settings__post-item-title\"></div>' +\n\t\t'<button class=\"twrp-display-list__item-remove-btn twrp-posts-settings__js-post-remove-btn\" type=\"button\">' +\n\t\t\t'<span class=\"dashicons dashicons-no\"></span>' +\n\t\t'</button>' +\n\t'</div>'\n);\n\n$( document ).on( 'click', '#twrp-posts-settings__js-posts-add-btn', handleAddPostClick );\n$( document ).on( 'keypress', '#twrp-posts-settings__js-posts-search', handleSearchInputKeypress );\n\n/**\n * When a user click \"enter\", add the current selected author to the list.\n */\nfunction handleSearchInputKeypress( event: JQueryEventObject ): void {\n\tconst keycode = ( event.keyCode ? event.keyCode : event.which );\n\tif ( keycode !== 13 ) {\n\t\treturn;\n\t}\n\n\tevent.preventDefault();\n\tconst autocompleteInstance: any = postsSearchInput.autocomplete( 'instance' );\n\n\tlet id: string, name: string;\n\ttry {\n\t\tconst selectedItem = autocompleteInstance.selectedItem;\n\t\tid = selectedItem.id;\n\t\tname = selectedItem.label;\n\t} catch ( error ) {\n\t\treturn;\n\t}\n\n\taddPost( id, name );\n}\n\n/**\n * Handles the click on \"Add post\" button.\n */\nfunction handleAddPostClick(): void {\n\tconst autocompleteInstance: any = postsSearchInput.autocomplete( 'instance' );\n\n\tlet id: string, name: string;\n\ttry {\n\t\tconst selectedItem = autocompleteInstance.selectedItem;\n\t\tid = selectedItem.id;\n\t\tname = selectedItem.label;\n\t} catch ( error ) {\n\t\treturn;\n\t}\n\n\taddPost( id, name );\n}\n\n/**\n * Add a post to the list of selected posts(both visual, and in the hidden\n * input).\n */\nfunction addPost( id:number|string, name: string ): void {\n\t_addPostToVisualList( id, name );\n\t_addPostToHiddenInput( id );\n\tremoveOrAddNoPostsText();\n}\n\n/**\n * Add a post to the visual list.\n */\nfunction _addPostToVisualList( id: number|string, name: string ): void {\n\tif ( postExistInVisualList( id ) ) {\n\t\treturn;\n\t}\n\n\tconst newAuthorItem = postVisualItem.clone();\n\tconst removeButtonLabel = getRemoveButtonAriaLabel().replace( '%s', sanitizePostName( name ) );\n\n\tnewAuthorItem.find( '.twrp-posts-settings__post-item-title' ).text( sanitizePostName( name ) );\n\tnewAuthorItem.find( '.twrp-display-list__item-remove-btn' ).attr( 'aria-label', removeButtonLabel );\n\n\tnewAuthorItem.attr( postIdAttrName, id );\n\tpostVisualList.append( newAuthorItem );\n\tshowLeft( newAuthorItem, 'hide_first' );\n}\n\n/**\n * Add a post to the list of hidden input.\n */\nfunction _addPostToHiddenInput( id: number|string ): void {\n\tif ( postExistInHiddenInput( id ) ) {\n\t\treturn;\n\t}\n\tid = String( id );\n\tconst previousVal = postsIdsInput.val();\n\n\tlet newVal = '';\n\tif ( previousVal ) {\n\t\tnewVal = previousVal + ';' + id;\n\t} else {\n\t\tnewVal = id;\n\t}\n\n\tpostsIdsInput.val( newVal );\n}\n\n// #endregion -- Add Post.\n\n// #region -- Remove post\n\n$( document ).on( 'click', '.twrp-posts-settings__js-post-remove-btn', handleRemovePost );\n\n/**\n * Handle the removing of the posts from the selected list.\n */\nfunction handleRemovePost(): void {\n\tlet id: string|number = $( this ).closest( '[' + postIdAttrName + ']' ).attr( postIdAttrName );\n\n\tid = Number( id );\n\tif ( ! ( id > 0 ) ) {\n\t\treturn;\n\t}\n\n\tremovePost( id );\n}\n\n/**\n * Removes a post to the list of selected posts(both visual, and in the\n * hidden input).\n */\nfunction removePost( id:number|string ): void {\n\t_removePostFromVisualList( id );\n\t_removePostFromHiddenInput( id );\n\tremoveOrAddNoPostsText();\n}\n\n/**\n * Removes a post from the visual list, based on id.\n */\nfunction _removePostFromVisualList( id: string|number ): void {\n\tconst itemToRemove = postVisualList.find( '[' + postIdAttrName + '=\"' + id + '\"]' );\n\titemToRemove.removeAttr( postIdAttrName );\n\thideLeft( itemToRemove, 'remove' );\n}\n\n/**\n * Removes a post from the hidden input list.\n */\nfunction _removePostFromHiddenInput( id: number|string ): void {\n\tconst currentValue = String( postsIdsInput.val() );\n\tid = String( id );\n\n\tconst postsIds = currentValue.split( ';' );\n\tconst indexOfId = postsIds.indexOf( id );\n\n\tif ( indexOfId !== -1 ) {\n\t\tpostsIds.splice( indexOfId, 1 );\n\t\tpostsIdsInput.val( postsIds.join( ';' ) );\n\t}\n}\n\n// #endregion -- Remove post\n\n// #region -- Manage the \"No Authors Added\" Text.\n\n/**\n * Contains the HTML Element that will be inserted/removed as necessary.\n */\nconst noPostsText = $( '#twrp-posts-settings__js-no-posts-selected' );\n\n$( removeOrAddNoPostsText );\n\n/**\n * Remove or add \"No posts selected\" text if necessary.\n */\nfunction removeOrAddNoPostsText() {\n\t_removeNoPostsTextIfNecessary();\n\t_addNoPostsTextIfNecessary();\n}\n\n/**\n * If Necessary, removes the \"No Posts selected\" text.\n */\nfunction _removeNoPostsTextIfNecessary() {\n\tconst haveItems = ( postVisualList.find( `[${ postIdAttrName }]` ).length > 0 );\n\n\tif ( haveItems ) {\n\t\thideLeft( noPostsText );\n\t}\n}\n\n/**\n * If Necessary, adds the \"No Posts selected\" text.\n */\nfunction _addNoPostsTextIfNecessary() {\n\tconst haveItems = ( postVisualList.find( `[${ postIdAttrName }]` ).length > 0 );\n\n\tif ( ! haveItems ) {\n\t\tshowLeft( noPostsText );\n\t}\n}\n\n// #endregion -- Manage the \"No Authors Added\" Text.\n\n// #region -- Sorting function\n\n$( initializeSorting );\n\n/**\n * Make the visual items sortable, and update the hidden input accordingly.\n */\nfunction initializeSorting() {\n\tpostVisualList.sortable( {\n\t\tplaceholder: 'twrp-display-list__placeholder',\n\t\tstop: updatePostsIdsFromVisualList,\n\t} );\n}\n\n// #endregion -- Sorting function\n\n// #region -- Helper Functions\n\n/**\n * Check to see if a given post item is displayed in visual list.\n */\nfunction postExistInVisualList( id: number|string ): boolean {\n\tconst postItem = postVisualList.find( '[' + postIdAttrName + '=\"' + id + '\"]' );\n\n\tif ( postItem.length ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Check to see if a given post item exist in the hidden list.\n */\nfunction postExistInHiddenInput( id: number|string ): boolean {\n\tconst inputVal = String( postsIdsInput.val() );\n\tid = Number( id );\n\n\tif ( ( ! inputVal ) || ! ( id > 0 ) ) {\n\t\treturn false;\n\t}\n\n\tconst postsIds = inputVal.split( ';' ).map( mapToInt );\n\n\tif ( postsIds.indexOf( id ) !== -1 ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n\n\tfunction mapToInt( val: any ): number {\n\t\treturn parseInt( val );\n\t}\n}\n\n/**\n * Updates the Ids in the input in the same order as the ones\n * from the visual list.\n */\nfunction updatePostsIdsFromVisualList(): void {\n\tconst postItems = postVisualList.find( '.twrp-posts-settings__post-item' ).filter( '[' + postIdAttrName + ']' );\n\tconst authorsIds = [];\n\n\tpostItems.each( function() {\n\t\tlet itemId: string|number = $( this ).attr( postIdAttrName );\n\n\t\titemId = +itemId;\n\t\tif ( itemId > 0 ) {\n\t\t\tauthorsIds.push( itemId );\n\t\t}\n\t} );\n\n\tpostsIdsInput.val( authorsIds.join( ';' ) );\n}\n\n/**\n * Sanitize the post name. It does not do something yet.\n */\nfunction sanitizePostName( name: string ): string {\n\treturn name;\n}\n\n/**\n * Get the aria label for the remove button. In the aria label will be present\n * \"%s\", which will need to be replaced with an author.\n */\nfunction getRemoveButtonAriaLabel(): string {\n\tconst ariaLabel = postVisualList.attr( 'data-twrp-aria-remove-label' );\n\tif ( ! ariaLabel ) {\n\t\treturn '';\n\t}\n\n\treturn ariaLabel;\n}\n\n/**\n * Decodes the HTML entities.\n */\nfunction decodeHtml( html: string ): string {\n\treturn $( '<div>' ).html( html ).text();\n}\n\n// #endregion -- Helper Functions\n","import $ from 'jquery';\nimport { toggleDisplay } from '../framework-blocks/twrp-hidden/twrp-hidden';\n\nconst showButtonSelector = '.twrpb-icons-spoiler__btn';\n\n$( document ).on( 'click', showButtonSelector, hideOrShowIconsSpoiler );\n\nfunction hideOrShowIconsSpoiler() {\n\tconst spoilerWrapper = $( this ).parent( '.twrpb-icons-spoiler__category' ).find( '.twrpb-icons-spoiler__spoiler' );\n\ttoggleDisplay( spoilerWrapper );\n}\n","import $ from 'jquery';\nimport 'jqueryui';\n\n// Todo... Remove all paragraphs with hide.\n\nconst effectDuration = 500;\n\nfunction toggleDisplay( element: JQuery ): void {\n\tif ( element.hasClass( 'twrp-hidden' ) ) {\n\t\tshowUp( element );\n\t} else {\n\t\thideUp( element );\n\t}\n}\n\n// #region -- Hide/Show Vertically\n\nfunction hideUp( element: JQuery ): void {\n\t$( element ).slideUp( {\n\t\tduration: effectDuration,\n\t\tcomplete() {\n\t\t\taddHideClass( element );\n\t\t},\n\t} );\n}\n\nfunction showUp( element: JQuery ): void {\n\t$( element ).slideDown( {\n\t\tduration: effectDuration,\n\t\tcomplete() {\n\t\t\tremoveHideClass( element );\n\t\t},\n\t} );\n}\n\n// #endregion -- Hide/Show Vertically\n\n// =============================================================================\n\n/**\n * Hide a HTML element with a blind effect from the left.\n *\n * @param {HTMLElement} element A jquery element.\n * @param {'remove'} remove Add 'remove' to remove the element from the DOM.\n */\nfunction hideLeft( element: JQuery, remove: string = '' ): void {\n\tlet completeFunction = function() {\n\t\taddHideClass( element );\n\t};\n\tif ( remove === 'remove' ) {\n\t\tcompleteFunction = function() {\n\t\t\tremoveElement( element );\n\t\t};\n\t}\n\n\t$( element ).hide( {\n\t\teffect: 'blind',\n\t\tduration: effectDuration,\n\t\tdirection: 'left',\n\t\tcomplete: completeFunction,\n\t} );\n}\n\n/**\n * Show a HTML element with a blind effect from the left.\n *\n * @param {HTMLElement} element A jquery element.\n * @param {'hide_first'} hideFirst Add 'hide_first' to first hide then show, if the\n * element already exists.\n */\nfunction showLeft( element: JQuery, hideFirst: string = '' ): void {\n\tif ( hideFirst === 'hide_first' ) {\n\t\telement.addClass( 'twrp-hidden' );\n\t}\n\n\t$( element ).show( {\n\t\teffect: 'blind',\n\t\tduration: effectDuration,\n\t\tdirection: 'left',\n\t\tcomplete() {\n\t\t\tremoveHideClass( element );\n\t\t},\n\t} );\n}\n\n// =============================================================================\n\nfunction addHideClass( element: JQuery ): void {\n\t$( element ).addClass( 'twrp-hidden' );\n}\n\nfunction removeHideClass( element: JQuery ): void {\n\t$( element ).removeClass( 'twrp-hidden' ).css( 'display', '' );\n}\n\nfunction removeElement( element: JQuery ): void {\n\t$( element ).remove();\n}\n\n// =============================================================================\n\nexport {\n\ttoggleDisplay,\n\tshowUp,\n\thideUp,\n\thideLeft,\n\tshowLeft,\n};\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { showUp, hideUp } from '../framework-blocks/twrp-hidden/twrp-hidden';\n\n// #region -- Hide or show custom date format depending on human readable date format.\n\nconst humanReadableEnabledCheckboxSelector = '#twrpb-general-settings__human_readable_date-setting-true';\nconst customDateWrapperSelector = '#twrpb-general-settings__date_format-wrapper';\n\nfunction showOrHideCustomDateFormat() {\n\tconst humanReadableEnabledCheckbox = $( humanReadableEnabledCheckboxSelector );\n\tconst customDateWrapper = $( customDateWrapperSelector );\n\n\tif ( humanReadableEnabledCheckbox.is( ':checked' ) ) {\n\t\thideUp( customDateWrapper );\n\t} else {\n\t\tshowUp( customDateWrapper );\n\t}\n}\n\n$( showOrHideCustomDateFormat );\n$( document ).on( 'click', showOrHideCustomDateFormat );\n\n// #endregion -- Hide or show custom date format depending on human readable date format.\n\n// #region -- Add an Icon preview on the right.\n\nconst iconWrapperClassName = 'twrpb-general-settings__icon-preview';\nconst iconAndSvgElem = '<span class=\"' + iconWrapperClassName + '\"><svg><use/></svg></span>';\nconst selectNames = [ 'author_icon', 'date_icon', 'category_icon', 'comments_icon', 'comments_disabled_icon', 'views_icon' ];\n\n$( updateAllIcons );\n$( document ).on( 'change', getDocumentOnClickSelector(), onChangeHandler );\n\n/**\n * Handler for the selection of the icon. Update the preview of changed icon.\n */\nfunction onChangeHandler( this: JQuery ) {\n\tconst selectName = String( $( this ).attr( 'name' ) );\n\n\tif ( ! selectName ) {\n\t\treturn;\n\t}\n\n\tupdateIcon( selectName );\n}\n\n/**\n * Update all icons on all selectors.\n */\nfunction updateAllIcons() {\n\tfor ( const selectName of selectNames ) {\n\t\tupdateIcon( selectName );\n\t}\n}\n\n/**\n * Given a selector name, update the icon corresponding to it.\n */\nfunction updateIcon( selectName: string ): void {\n\tconst selectElem = $( 'select[name=\"' + selectName + '\"' );\n\n\tif ( selectElem.length === 0 ) {\n\t\treturn;\n\t}\n\n\tconst selectWrapper = selectElem.parent();\n\tconst iconId = String( selectElem.val() );\n\n\tselectWrapper.find( '.' + iconWrapperClassName ).remove();\n\t$( iconAndSvgElem ).insertBefore( selectElem );\n\tselectWrapper.find( 'use' ).attr( 'href', '#' + iconId );\n}\n\n/**\n * Get the jQuery selector to attach the event to the document.\n */\nfunction getDocumentOnClickSelector(): string {\n\tlet documentOnClickSelector = '';\n\n\tfor ( const selectName of selectNames ) {\n\t\tif ( documentOnClickSelector ) {\n\t\t\tdocumentOnClickSelector = documentOnClickSelector + ', ';\n\t\t}\n\t\tdocumentOnClickSelector = documentOnClickSelector + 'select[name=\"' + selectName + '\"]';\n\t}\n\n\treturn documentOnClickSelector;\n}\n\n// #endregion -- Add an Icon preview on the right.\n\n// #region -- Add icons preview on the right for rating packs.\n\nconst ratingIconsDataSetElementId = 'twrpb-general-settings__rating_pack_icons-wrapper';\nconst dataHolderName = 'data-twrp-rating-packs';\nconst selectRatingName = 'rating_pack_icons';\n\nconst iconsPreviewWrapperClassName = 'twrpb-general-select__rating_icons_preview';\nconst iconsPreviewWrapper = '<span class=\"' + iconsPreviewWrapperClassName + '\"></span>';\nconst ratingIconAndSvgElem = iconAndSvgElem;\nlet ratingIconsSet = null;\n\n$( updateRatingIcons );\n$( document ).on( 'change', 'select[name=\"' + selectRatingName + '\"]', updateRatingIcons );\n\nfunction setRatingIconsData() {\n\tconst dataHolderElement = $( '#' + ratingIconsDataSetElementId );\n\tif ( dataHolderElement.length === 0 ) {\n\t\treturn;\n\t}\n\n\tconst toParse = dataHolderElement.attr( dataHolderName );\n\n\tif ( ( typeof toParse ) !== 'string' ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tratingIconsSet = JSON.parse( toParse );\n\t} catch ( e ) {\n\t\t// Do nothing.\n\t}\n}\n\nfunction updateRatingIcons() {\n\tif ( null === ratingIconsSet ) {\n\t\tsetRatingIconsData();\n\t}\n\n\tconst selectElem = $( 'select[name=\"' + selectRatingName + '\"]' );\n\n\tif ( selectElem.length === 0 ) {\n\t\treturn;\n\t}\n\n\tconst selectWrapper = selectElem.parent();\n\tconst selectedRatingPack = String( selectElem.val() );\n\n\t// Check if all property exists before accessing them.\n\tif ( ! ( selectedRatingPack in ratingIconsSet ) ||\n\t\t! ( 'empty' in ratingIconsSet[ selectedRatingPack ] ) ||\n\t\t! ( 'half' in ratingIconsSet[ selectedRatingPack ] ) ||\n\t\t! ( 'full' in ratingIconsSet[ selectedRatingPack ] )\n\t) {\n\t\treturn;\n\t}\n\n\tconst emptyIconId = ratingIconsSet[ selectedRatingPack ].empty;\n\tconst halfFilledIconId = ratingIconsSet[ selectedRatingPack ].half;\n\tconst filledIconId = ratingIconsSet[ selectedRatingPack ].full;\n\n\tselectWrapper.find( '.' + iconsPreviewWrapperClassName ).remove();\n\tselectWrapper.prepend( iconsPreviewWrapper );\n\n\tconst iconsWrapperPreviewElement = selectWrapper.find( '.' + iconsPreviewWrapperClassName );\n\t$( ratingIconAndSvgElem ).appendTo( iconsWrapperPreviewElement ).find( 'use' ).attr( 'href', '#' + filledIconId );\n\t$( ratingIconAndSvgElem ).appendTo( iconsWrapperPreviewElement ).find( 'use' ).attr( 'href', '#' + halfFilledIconId );\n\t$( ratingIconAndSvgElem ).appendTo( iconsWrapperPreviewElement ).find( 'use' ).attr( 'href', '#' + emptyIconId );\n}\n\n// #endregion -- Add icons preview on the right for rating packs.\n\n// #region -- Auto-Choose the compatible disabled icon.\n\nconst selectCommentIconSelector = '#twrpb-general-settings__comments_icon-setting';\nconst selectDisabledCommentIconSelector = '#twrpb-general-settings__comments_disabled_icon-setting';\n\nconst dataHolderElementSelector = '#twrpb-general-settings__comments_disabled_icon-wrapper';\nconst dataHolderAttrName = 'data-twrp-related-comment-icons';\nlet compatibleDisabledComments = null;\n\nconst autoSelectIconSwitchName = 'comments_disabled_icon_auto_select';\n\n$( enableOrDisableIconSelect );\n$( document ).on( 'change', selectCommentIconSelector, onChangeAutoSelectHandler );\n$( document ).on( 'change', 'input[name=\"' + autoSelectIconSwitchName + '\"]', enableOrDisableIconSelect );\n$( document ).on( 'submit', onSubmitSendDisable );\n\nfunction setCommentsData() {\n\tconst dataHolderElement = $( dataHolderElementSelector );\n\tif ( dataHolderElement.length === 0 ) {\n\t\treturn;\n\t}\n\n\tconst toParse = dataHolderElement.attr( dataHolderAttrName );\n\n\tif ( ( typeof toParse ) !== 'string' ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tcompatibleDisabledComments = JSON.parse( toParse );\n\t} catch ( e ) {\n\t\t// Do nothing.\n\t}\n}\n\nfunction onChangeAutoSelectHandler() {\n\tif ( isEnableAutoSelect() ) {\n\t\tdoDisabledCommentIconAutoSelect();\n\t}\n}\n\nfunction doDisabledCommentIconAutoSelect() {\n\tif ( compatibleDisabledComments === null ) {\n\t\tsetCommentsData();\n\t}\n\tif ( compatibleDisabledComments === null ) {\n\t\treturn;\n\t}\n\n\tconst commentId = String( $( selectCommentIconSelector ).val() );\n\n\tif ( ! compatibleDisabledComments[ commentId ] ) {\n\t\treturn;\n\t}\n\n\tconst compatibleDisabledCommentIconId = String( compatibleDisabledComments[ commentId ] );\n\n\t$( selectDisabledCommentIconSelector ).val( compatibleDisabledCommentIconId ).trigger( 'change' );\n}\n\nlet firstTime = true;\nfunction enableOrDisableIconSelect() {\n\tif ( isEnableAutoSelect() ) {\n\t\tdisableIconSelector();\n\t\tif ( ! firstTime ) {\n\t\t\tdoDisabledCommentIconAutoSelect();\n\t\t}\n\t\tfirstTime = false;\n\t} else {\n\t\tenableIconSelector();\n\t}\n}\n\nfunction isEnableAutoSelect(): boolean {\n\tconst val = String( $( 'input[name=\"' + autoSelectIconSwitchName + '\"]:checked' ).val() );\n\tif ( parseInt( val ) === 1 || val === 'true' ) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction disableIconSelector() {\n\t$( selectDisabledCommentIconSelector ).prop( 'disabled', true );\n}\n\nfunction enableIconSelector() {\n\t$( selectDisabledCommentIconSelector ).removeProp( 'disabled' );\n}\n\nfunction onSubmitSendDisable() {\n\tenableIconSelector();\n}\n\n// #endregion -- Auto-Choose the compatible disabled icon.\n","import $ from 'jquery';\n\ndeclare let CodeMirror: any;\n\n$( enableCodeMirror );\n\nfunction enableCodeMirror(): void {\n\tconst element = document.getElementById( 'twrpb-advanced-args__textarea' );\n\n\tif ( element ) {\n\t\tCodeMirror.fromTextArea( element, {\n\t\t\tmode: 'application/json',\n\t\t\ttheme: 'material-darker',\n\t\t\tindentUnit: 4,\n\t\t\tindentWithTabs: true,\n\t\t\tlineNumbers: true,\n\t\t\tautoRefresh: true,\n\t\t} );\n\t}\n}\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { showUp, hideUp, hideLeft, showLeft } from '../../framework-blocks/twrp-hidden/twrp-hidden';\n\ndeclare const wp: any;\n\n// #region -- Hide/Show Author List and Add Button based on option selected.\n\nconst authorTypeSelector = $( '#twrpb-author-settings__select_type' );\n\nconst authorSearchWrap = $( '#twrpb-author-settings__author-search-wrap' );\nconst authorToHideList = $( '#twrpb-author-settings__js-authors-list' );\n\n// $( hideOrShowVisualList );\n$( document ).on( 'change', '#twrpb-author-settings__select_type', hideOrShowVisualList );\n\n/**\n * Hide or show the visual list and the form input to search for users.\n */\nfunction hideOrShowVisualList() {\n\tconst authorTypeVal = authorTypeSelector.val();\n\n\tif ( 'IN' === authorTypeVal || 'OUT' === authorTypeVal ) {\n\t\tshowUp( authorSearchWrap );\n\t\tshowUp( authorToHideList );\n\t} else {\n\t\thideUp( authorSearchWrap );\n\t\thideUp( authorToHideList );\n\t}\n}\n\n// #endregion -- Hide/Show Author List and Add Button based on option selected.\n\n// #region -- Hide/Show Same author notice.\n\nconst sameAuthorNotice = $( '#twrpb-author-settings__js-same-author-notice' );\n\n$( handleSameAuthorNotice );\n$( document ).on( 'change', '#twrpb-author-settings__select_type', handleSameAuthorNotice );\n\n/**\n * Hide or show a notice that says that when the author is set to the same as\n * the post, the query will not be displayed on non-singular pages.\n */\nfunction handleSameAuthorNotice() {\n\tconst authorTypeVal = authorTypeSelector.val();\n\n\tif ( 'SAME' === authorTypeVal ) {\n\t\tshowUp( sameAuthorNotice );\n\t} else {\n\t\thideUp( sameAuthorNotice );\n\t}\n}\n\n// #endregion -- Hide/Show Same author notice.\n\n// #region -- Manage Author Search\n\n$( initializeAutoComplete );\n\n/**\n * The search input where administrators will search for users.\n */\nconst authorSearchInput = $( '#twrpb-author-settings__js-author-search' );\n\n/**\n * Initialize the search input, when a user enter some characters, it will\n * automatically search and display the options.\n */\nfunction initializeAutoComplete() {\n\tauthorSearchInput.autocomplete( {\n\t\tsource: showSearchedUsers,\n\t\tminLength: 2,\n\t} );\n}\n\n/**\n * Search for the users and append the results into the autocomplete selector.\n */\nfunction showSearchedUsers( request: any, sendToControl: CallableFunction ): void {\n\tconst allUsers = new wp.api.collections.Users();\n\tconst usersFound: Array<Object> = [];\n\n\tallUsers.fetch( {\n\t\tdata: {\n\t\t\t_fields: 'id,name',\n\t\t\tsearch: request.term,\n\t\t},\n\t} );\n\n\tallUsers.once( 'sync', updateCategories );\n\n\tfunction updateCategories() {\n\t\tfor ( let i = 0; i < allUsers.length; i++ ) {\n\t\t\tlet name, id;\n\t\t\ttry {\n\t\t\t\tname = decodeHtml( allUsers.models[ i ].attributes.name );\n\t\t\t\tid = allUsers.models[ i ].attributes.id;\n\t\t\t} catch ( error ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tusersFound.push( {\n\t\t\t\tvalue: name,\n\t\t\t\tlabel: name,\n\t\t\t\tid,\n\t\t\t} );\n\t\t}\n\t\tsendToControl( usersFound );\n\t}\n\n\tallUsers.once( 'error', function() {\n\t\tconsole.error( 'TWRP Backbone error when getting users.' ); // eslint-disable-line\n\t\tupdateCategories();\n\t} );\n\n\tallUsers.once( 'invalid', function() {\n\t\tconsole.error( 'TWRP Backbone invalid when getting users.' ); // eslint-disable-line\n\t\tupdateCategories();\n\t} );\n}\n\n// #endregion -- Manage Author Search\n\n// #region -- Add an author\n\nconst authorsIdsInput = $( '#twrpb-author-settings__js-author-ids' );\n\nconst authorsVisualList = $( '#twrpb-author-settings__js-authors-list' );\n\n/**\n * Attribute on authorsVisualList that holds the aria label for the remove button.\n */\nconst ariaLabelDataAttr = 'data-twrpb-aria-remove-label';\n\n/**\n * The template for an author item, to be appended to the visual list. Note that\n * we have a similar template in the PHP file, so a change here will require\n * also a change there, and vice-versa.\n */\nconst authorVisualItem = $(\n\t'<div class=\"twrpb-display-list__item twrpb-author-settings__author-item\">' +\n\t\t'<div class=\"twrpb-author-settings__author-item-name\"></div>' +\n\t\t'<button class=\"twrpb-display-list__item-remove-btn twrpb-author-settings__js-author-remove-btn\" type=\"button\">' +\n\t\t\t'<span class=\"dashicons dashicons-no\"></span>' +\n\t\t'</button>' +\n\t'</div>'\n);\n\n/**\n * The author attribute name that hold the Id of a visual item.\n */\nconst authorIdAttrName = 'data-author-id';\n\n$( document ).on( 'click', '#twrpb-author-settings__js-author-add-btn', handleAddAuthorClick );\n$( document ).on( 'keypress', '#twrpb-author-settings__js-author-search', handleSearchInputKeypress );\n\n/**\n * When a user click \"enter\", add the current selected author to the list.\n */\nfunction handleSearchInputKeypress( event: JQueryEventObject ): void {\n\tconst keycode = ( event.keyCode ? event.keyCode : event.which );\n\tif ( keycode !== 13 ) {\n\t\treturn;\n\t}\n\n\tevent.preventDefault();\n\tconst autocompleteInstance: any = authorSearchInput.autocomplete( 'instance' );\n\n\tlet id: string, name: string;\n\ttry {\n\t\tconst selectedItem = autocompleteInstance.selectedItem;\n\t\tid = selectedItem.id;\n\t\tname = selectedItem.label;\n\t} catch ( error ) {\n\t\treturn;\n\t}\n\n\taddAuthor( id, name );\n}\n\n/**\n * Handles the click on \"Add author\" button.\n */\nfunction handleAddAuthorClick(): void {\n\tconst autocompleteInstance: any = authorSearchInput.autocomplete( 'instance' );\n\n\tlet id: string, name: string;\n\ttry {\n\t\tconst selectedItem = autocompleteInstance.selectedItem;\n\t\tid = selectedItem.id;\n\t\tname = selectedItem.label;\n\t} catch ( error ) {\n\t\treturn;\n\t}\n\n\taddAuthor( id, name );\n}\n\n/**\n * Add an author to the list of selected authors(both visual, and in the hidden\n * input).\n */\nfunction addAuthor( id:number|string, name: string ): void {\n\t_addAuthorToVisualList( id, name );\n\t_addAuthorToHiddenInput( id );\n\tremoveOrAddNoAuthorsText();\n}\n\n/**\n * Add an author to the visual list.\n */\nfunction _addAuthorToVisualList( id: number|string, name: string ): void {\n\tif ( authorExistInVisualList( id ) ) {\n\t\treturn;\n\t}\n\n\tconst newAuthorItem = authorVisualItem.clone();\n\tconst removeBtnAriaLabel = getRemoveButtonAriaLabel().replace( '%s', sanitizeAuthorName( name ) );\n\tnewAuthorItem.find( '.twrpb-author-settings__author-item-name' ).text( sanitizeAuthorName( name ) );\n\tnewAuthorItem.find( '.twrpb-display-list__item-remove-btn' ).attr( 'aria-label', removeBtnAriaLabel );\n\tnewAuthorItem.attr( authorIdAttrName, id );\n\tauthorsVisualList.append( newAuthorItem );\n\tshowLeft( newAuthorItem, 'hide_first' );\n}\n\n/**\n * Add an author to the list of hidden input.\n */\nfunction _addAuthorToHiddenInput( id: number|string ): void {\n\tif ( authorExistInHiddenInput( id ) ) {\n\t\treturn;\n\t}\n\tid = String( id );\n\tconst previousVal = authorsIdsInput.val();\n\n\tlet newVal = '';\n\tif ( previousVal ) {\n\t\tnewVal = previousVal + ';' + id;\n\t} else {\n\t\tnewVal = id;\n\t}\n\n\tauthorsIdsInput.val( newVal );\n}\n\n// #endregion -- Add an author\n\n// #region -- Remove an author\n\n$( document ).on( 'click', '.twrpb-author-settings__js-author-remove-btn', handleRemoveAuthor );\n\n/**\n * Handle the removing of the authors from the selected list.\n */\nfunction handleRemoveAuthor( this:JQuery ): void {\n\tconst id: number = Number( $( this ).closest( '[' + authorIdAttrName + ']' ).attr( authorIdAttrName ) );\n\n\tif ( ! ( id > 0 ) ) {\n\t\treturn;\n\t}\n\n\tremoveAuthor( id );\n}\n\n/**\n * Removes an author to the list of selected authors(both visual, and in the\n * hidden input).\n */\nfunction removeAuthor( id:number|string ): void {\n\t_removeAuthorFromVisualList( id );\n\t_removeAuthorFromHiddenInput( id );\n\tremoveOrAddNoAuthorsText();\n}\n\n/**\n * Removes the author from the visual list, based on id.\n */\nfunction _removeAuthorFromVisualList( id: string|number ): void {\n\tconst itemToRemove = authorsVisualList.find( '[' + authorIdAttrName + '=\"' + id + '\"]' );\n\t// Remove the attr fast, to trigger to show the empty authors list message\n\t// if necessary.\n\titemToRemove.removeAttr( authorIdAttrName );\n\thideLeft( itemToRemove, 'remove' );\n}\n\n/**\n * Removes an author from the hidden input list.\n */\nfunction _removeAuthorFromHiddenInput( id: number|string ): void {\n\tconst currentValue = String( authorsIdsInput.val() );\n\tid = String( id );\n\n\tconst authorsIds = currentValue.split( ';' );\n\tconst indexOfId = authorsIds.indexOf( id );\n\n\tif ( indexOfId !== -1 ) {\n\t\tauthorsIds.splice( indexOfId, 1 );\n\t\tauthorsIdsInput.val( authorsIds.join( ';' ) );\n\t}\n}\n\n// #endregion -- Remove an author\n\n// #region -- Manage the \"No Authors Added\" Text.\n\n/**\n * Contains the HTML Element that will be inserted/removed as necessary.\n */\nconst noAuthorsText = $( '#twrpb-author-settings__js-no-authors-selected' );\n\n$( removeOrAddNoAuthorsText );\n\n/**\n * Remove or add \"No authors\" text if necessary.\n */\nfunction removeOrAddNoAuthorsText() {\n\t_removeNoAuthorsTextIfNecessary();\n\t_addNoAuthorsTextIfNecessary();\n}\n\n/**\n * If Necessary, removes the \"No Authors selected\" text.\n */\nfunction _removeNoAuthorsTextIfNecessary() {\n\tconst haveItems = ( authorsVisualList.find( `[${ authorIdAttrName }]` ).length > 0 );\n\n\tif ( haveItems ) {\n\t\thideLeft( noAuthorsText );\n\t}\n}\n\n/**\n * If Necessary, adds the \"No Authors selected\" text.\n */\nfunction _addNoAuthorsTextIfNecessary() {\n\tconst haveItems = ( authorsVisualList.find( `[${ authorIdAttrName }]` ).length > 0 );\n\n\tif ( ! haveItems ) {\n\t\tshowLeft( noAuthorsText );\n\t}\n}\n\n// #endregion -- Manage the \"No Authors Added\" Text.\n\n// #region -- Sorting function.\n\n$( initializeSorting );\n\n/**\n * Make the visual items sortable, and update the hidden input accordingly.\n */\nfunction initializeSorting() {\n\tauthorsVisualList.sortable( {\n\t\tplaceholder: 'twrpb-display-list__placeholder',\n\t\tstop: updateAuthorsIdsFromVisualList,\n\t} );\n}\n\n// #endregion -- Sorting function.\n\n// #region -- Helper Functions\n\n/**\n * Check to see if a given author item is displayed in visual list.\n */\nfunction authorExistInVisualList( id: number|string ): boolean {\n\tconst authorItem = authorsVisualList.find( '[' + authorIdAttrName + '=\"' + id + '\"]' );\n\n\tif ( authorItem.length ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Check to see if a given author item exist in the hidden list.\n */\nfunction authorExistInHiddenInput( id: number|string ): boolean {\n\tconst inputVal = String( authorsIdsInput.val() );\n\tid = Number( id );\n\n\tif ( ( ! inputVal ) || ! ( id > 0 ) ) {\n\t\treturn false;\n\t}\n\n\tconst authorsIds = inputVal.split( ';' ).map( mapToInt );\n\n\tif ( authorsIds.indexOf( id ) !== -1 ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n\n\tfunction mapToInt( val: any ): number {\n\t\treturn parseInt( val );\n\t}\n}\n\n/**\n * Updates the Ids in the input in the same order as the ones\n * from the visual list.\n */\nfunction updateAuthorsIdsFromVisualList(): void {\n\tconst authorItems = authorsVisualList.find( '.twrpb-author-settings__author-item' );\n\tconst authorsIds:Array<number> = [];\n\n\tauthorItems.each( function() {\n\t\tconst itemId: number = Number( $( this ).attr( authorIdAttrName ) );\n\n\t\tif ( itemId > 0 ) {\n\t\t\tauthorsIds.push( itemId );\n\t\t}\n\t} );\n\n\tauthorsIdsInput.val( authorsIds.join( ';' ) );\n}\n\n/**\n * Get the aria label for the remove button. In the aria label will be present\n * \"%s\", which will need to be replaced with an author.\n */\nfunction getRemoveButtonAriaLabel(): string {\n\tconst ariaLabel = authorsVisualList.attr( ariaLabelDataAttr );\n\tif ( ! ariaLabel ) {\n\t\treturn '';\n\t}\n\n\treturn ariaLabel;\n}\n\n/**\n * Sanitize the author name.\n */\nfunction sanitizeAuthorName( name: string ): string {\n\t// Names that are get are already sanitized.\n\treturn name;\n}\n\n/**\n * Decodes the HTML entities.\n */\nfunction decodeHtml( html: string ): string {\n\treturn $( '<div>' ).html( html ).text();\n}\n\n// #endregion -- Helper Functions\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp } from '../../framework-blocks/twrp-hidden/twrp-hidden';\n\nconst searchInput = $( '#twrpb-search-setting__js-search-input' );\nconst warningWrapper = $( '#twrpb-search-setting__js-words-warning' );\n\n$( hiderOrShowSearchWarning );\n$( document ).on( 'change', '#twrpb-search-setting__js-search-input', hiderOrShowSearchWarning );\n\nfunction hiderOrShowSearchWarning(): void {\n\tconst searchString = String( searchInput.val() );\n\tconst searchStringLength = searchString.length;\n\n\tif ( ( searchStringLength !== 0 ) && ( searchStringLength < 4 ) ) {\n\t\tshowUp( warningWrapper );\n\t} else {\n\t\thideUp( warningWrapper );\n\t}\n}\n","import $ from 'jquery';\nimport 'jqueryui';\nimport { hideUp, showUp } from '../../framework-blocks/twrp-hidden/twrp-hidden';\n\nconst applySettingSelect = $( '#twrpb-statuses-settings__js-apply-select' );\nconst postStatuses = $( '#twrpb-statuses-settings__js-statuses-wrapper' );\n\n$( document ).on( 'change', '#twrpb-statuses-settings__js-apply-select', hideOrShowPostStatuses );\n$( hideOrShowPostStatuses );\n\nfunction hideOrShowPostStatuses() {\n\tif ( applySettingSelect.val() === 'not_applied' ) {\n\t\thideUp( postStatuses );\n\t} else {\n\t\tshowUp( postStatuses );\n\t}\n}\n","import './framework-blocks/twrp-hidden/twrp-hidden';\nimport './common-blocks/twrp-collapsible/twrp-collapsible';\nimport './common-blocks/twrp-cat-settings/twrp-cat-settings';\nimport './common-blocks/twrp-comments-settings/twrp-comments-settings';\nimport './common-blocks/twrp-date-settings/twrp-date-settings';\nimport './common-blocks/twrp-posts-settings/twrp-posts-settings';\nimport './common-blocks/twrp-order-setting/twrp-order-setting';\nimport './common-blocks/twrp-meta-setting/twrp-meta-setting';\n\n// Widget Blocks\nimport './widget-blocks/twrp-widget-form';\nimport './widget-blocks/twrp-widget-components';\nimport './widget-blocks/twrp-color-picker';\nimport './widget-blocks/twrp-icon-select-preview';\n\n// General Settings\nimport './general-settings/twrpb-general-settings';\n\n// Query Settings\nimport './query-settings/twrpb-advanced-args/twrpb-advanced-args';\nimport './query-settings/twrpb-author-settings/twrpb-author-settings';\nimport './query-settings/twrpb-search-setting/twrpb-search-setting';\nimport './query-settings/twrpb-statuses-settings/twrpb-statuses-settings';\n\n// Documentation Page\nimport './documentation-page/twrpb-documentation-page';\n\nexport default {};\n","import $ from 'jquery';\n\ndeclare const Pickr: any;\n\n$( createPicker );\n\nfunction createPicker() {\n\tconst colorPickers = $( '.twrp-color-picker' );\n\n\tcolorPickers.each( function() {\n\t\tconst element: any = this;\n\t\tconst input = $( element ).parent().find( 'input' );\n\t\tlet inputVal = input.val();\n\n\t\tif ( ! inputVal ) {\n\t\t\tinputVal = null;\n\t\t}\n\n\t\tconst pickr = Pickr.create( {\n\t\t\tel: element,\n\t\t\ttheme: 'classic',\n\t\t\tcontainer: 'body',\n\t\t\tdefault: inputVal,\n\t\t\tappClass: 'twrp-pickr',\n\n\t\t\tswatches: [\n\t\t\t\t'rgba(244, 67, 54, 1)',\n\t\t\t\t'rgba(233, 30, 99, 1)',\n\t\t\t\t'rgba(156, 39, 176, 1)',\n\t\t\t\t'rgba(103, 58, 183, 1)',\n\t\t\t\t'rgba(63, 81, 181, 1)',\n\t\t\t\t'rgba(33, 150, 243, 1)',\n\t\t\t\t'rgba(3, 169, 244, 1)',\n\t\t\t\t'rgba(0, 188, 212, 1)',\n\t\t\t\t'rgba(0, 150, 136, 1)',\n\t\t\t\t'rgba(76, 175, 80, 1)',\n\t\t\t\t'rgba(139, 195, 74, 1)',\n\t\t\t\t'rgba(205, 220, 57, 1)',\n\t\t\t\t'rgba(255, 235, 59, 1)',\n\t\t\t\t'rgba(255, 193, 7, 1)',\n\t\t\t],\n\t\t\tdefaultRepresentation: 'RGBA',\n\n\t\t\tcomponents: {\n\t\t\t\t// Main components\n\t\t\t\tpreview: true,\n\t\t\t\topacity: true,\n\t\t\t\thue: true,\n\n\t\t\t\t// Input / output Options\n\t\t\t\tinteraction: {\n\t\t\t\t\tinput: true,\n\t\t\t\t\tcancel: true,\n\t\t\t\t\tclear: true,\n\t\t\t\t\tsave: true,\n\t\t\t\t},\n\t\t\t},\n\t\t} ).on( 'save', function( color: any ) {\n\t\t\tif ( color ) {\n\t\t\t\tinput.val( color.toRGBA().toString( 0 ) );\n\t\t\t} else {\n\t\t\t\tinput.val( '' );\n\t\t\t}\n\n\t\t\tinput.change();\n\t\t\tpickr.hide();\n\t\t} );\n\n\t\tpickr.setColorRepresentation( 'RGBA' );\n\t} );\n}\n","import $ from 'jquery';\nimport 'jqueryui';\n\n$( createWidgetTabs );\nfunction createWidgetTabs() {\n\t$( '.twrp-widget-components' ).tabs( {\n\t\tactive: 0,\n\t} );\n}\n","import $ from 'jquery';\nimport 'jqueryui';\n\ndeclare const ajaxurl: string;\n\n/**\n * Todo: Do not save widget if the query tabs are not displayed.\n * Todo: Block the select option while the article block is loading and waited to be appended.\n */\n\nconst dataWidgetId = 'data-twrp-widget-id';\nconst dataQueryId = 'data-twrp-query-id';\nconst dataArtblockId = 'data-twrp-selected-artblock';\n\nconst queriesListSelector = '.twrp-widget-form__selected-queries-list';\nconst queriesItemSelector = '.twrp-widget-form__selected-query';\n\nconst queryAddSelector = '.twrp-widget-form__select-query-to-add-btn';\nconst queryRemoveSelector = '.twrp-widget-form__remove-selected-query';\n\nconst queriesInputSelector = '.twrp-widget-form__selected-queries';\n\nconst selectArticleBlockSelector = '.twrp-widget-form__article-block-selector';\nconst artblockSettingsWrapperSelector = '.twrp-widget-form__article-block-settings';\n\n$( document ).on( 'click', queryAddSelector, handleAddQueryButton );\n$( document ).on( 'click', queryRemoveSelector, handleRemoveQuery );\n\n/**\n * Handles the click when a user wants to add a query(tab) to be displayed and\n * modify its settings.\n */\nfunction handleAddQueryButton(): void {\n\tconst widgetWrapper = $( this ).closest( '.twrp-widget-form' );\n\tconst widgetId = widgetWrapper.attr( dataWidgetId );\n\tconst queryId = String( widgetWrapper.find( '.twrp-widget-form__select-query-to-add' ).val() );\n\n\tconst queriesInputValue = getQueriesInputValues( widgetWrapper );\n\n\tif ( queriesInputValue.indexOf( queryId ) === -1 ) {\n\t\tqueriesInputValue.push( queryId );\n\t\tsetQueriesInputValues( widgetId, queriesInputValue );\n\t\tif ( ! queryExistInList( widgetId, queryId ) ) {\n\t\t\tappendQueryToList( widgetId, queryId );\n\t\t}\n\t}\n}\n\n/**\n * Removes the query from Display List and Input List.\n */\nfunction handleRemoveQuery() {\n\tconst widgetId = getClosestWidgetId( $( this ) );\n\tconst queryId = getClosestQueryId( $( this ) );\n\n\tremoveQueryFromList( widgetId, queryId );\n\tupdateQueriesInput( widgetId );\n}\n\n// =============================================================================\n// Widgets\n\nlet widgets: JQuery<HTMLElement> = $();\n\n$( updateWidgetsList );\n\n$( document ).on( 'click', updateWidgetsList );\n\n/**\n * Update the file global variable \"widgets\" to contain all the instance widgets\n * on the page.\n */\nfunction updateWidgetsList(): void {\n\twidgets = $( document ).find( `[${ dataWidgetId }]` );\n}\n\n// =============================================================================\n// Widget List Display Functions\n\n$( updateAllWidgetsListOnLoad );\n$( document ).on( 'click', updateAllWidgetsListOnLoad );\n\nfunction updateAllWidgetsListOnLoad(): void {\n\twidgets.each( function() {\n\t\tconst widgetId = $( this ).attr( dataWidgetId );\n\t\tupdateQueriesDisplayListFromInput( widgetId );\n\t} );\n}\n\n/**\n * Update the queries list from the queries input.\n */\nfunction updateQueriesDisplayListFromInput( widgetId: string ) {\n\tconst widget = getWidgetWrapperById( widgetId );\n\tconst queries = getQueriesInputValues( widget );\n\n\tfor ( let i = 0; i < queries.length; i++ ) {\n\t\tif ( ! queryExistInList( widgetId, queries[ i ] ) ) {\n\t\t\tappendQueryToList( widgetId, queries[ i ] );\n\t\t}\n\t}\n\n\t// Todo: remove all widgets that are not in the input.\n\tconst queriesItems = widget.find( `[${ dataQueryId }]` );\n\tqueriesItems.each( function() {\n\t\tconst queryId = $( this ).attr( dataQueryId );\n\t\tif ( queries.indexOf( queryId ) === -1 ) {\n\t\t\t$( this ).remove();\n\t\t}\n\t} );\n}\n\n/**\n * Updates the queries input, from the queries display list.\n */\nfunction updateQueriesInput( widgetId: string ): void {\n\tconst widget = getWidgetWrapperById( widgetId );\n\tconst queriesItems = widget.find( queriesListSelector ).find( queriesItemSelector );\n\n\tconst queries = [];\n\tqueriesItems.each( function() {\n\t\tconst queryId = $( this ).attr( dataQueryId );\n\t\tif ( queryId ) {\n\t\t\tqueries.push( queryId );\n\t\t}\n\t} );\n\tsetQueriesInputValues( widgetId, queries );\n}\n\n/**\n * Appends a query tab to the widget list of queries.\n */\nasync function appendQueryToList( widgetId: string, queryId: string|number ) {\n\tconst queryHTML = await getQueryHTMLForList( widgetId, queryId );\n\tconst widget = getWidgetWrapperById( widgetId );\n\tif ( ! queryExistInList( widgetId, queryId ) ) {\n\t\tconst queriesList = widget.find( '.twrp-widget-form__selected-queries-list' );\n\t\tqueriesList.append( queryHTML );\n\t\tqueriesList.trigger( 'twrp-query-list-added', [ widgetId, queryId ] );\n\t}\n}\n\n/**\n * Get the HTML for a query tab to be displayed in the widget setting.\n */\nfunction getQueryHTMLForList( widgetId: string, queryId: string|number ) {\n\treturn $.ajax( {\n\t\turl: ajaxurl,\n\t\tmethod: 'POST',\n\t\tdata: {\n\t\t\taction: 'twrp_widget_create_query_setting',\n\t\t\twidget_id: widgetId,\n\t\t\tquery_id: queryId,\n\t\t},\n\t} );\n}\n\n/**\n * Remove a Query From the Display List.\n */\nfunction removeQueryFromList( widgetId: string, queryId: string|number ) {\n\tconst queryItem = getQueryItemById( widgetId, queryId );\n\tqueryItem.remove();\n}\n\n/**\n * Check if a query settings are displayed in the widget.\n */\nfunction queryExistInList( widgetId: string, queryId: string|number ): boolean {\n\tconst queryItem = getQueryItemById( widgetId, queryId );\n\tif ( queryItem.length ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n$( document ).on( 'twrp-query-list-added', handleReorderQueries );\n\nfunction handleReorderQueries( event, widgetId ) {\n\treorderQueriesDisplayList( widgetId );\n}\n\nfunction reorderQueriesDisplayList( widgetId: string ): void {\n\tconst widget = getWidgetWrapperById( widgetId );\n\tconst queryList = widget.find( queriesListSelector );\n\tconst queryItems = widget.find( `[${ dataQueryId }]` );\n\tconst queriesIds = getQueriesInputValues( widget );\n\n\tqueryItems.detach();\n\n\tfor ( let i = 0; i < queriesIds.length; i++ ) {\n\t\tfor ( let j = 0; j < queryItems.length; j++ ) {\n\t\t\tif ( queriesIds[ i ] === queryItems.eq( j ).attr( dataQueryId ) ) {\n\t\t\t\tqueryList.append( queryItems.eq( j ) );\n\t\t\t}\n\t\t}\n\t}\n}\n\n// =============================================================================\n// Utility functions.\n\nfunction getClosestWidgetId( element: any ): string {\n\treturn $( element ).closest( `[${ dataWidgetId }]` ).attr( dataWidgetId );\n}\n\nfunction getClosestQueryId( element: any ): string {\n\treturn $( element ).closest( `[${ dataQueryId }]` ).attr( dataQueryId );\n}\n\nfunction getWidgetWrapperById( widgetId: string ): JQuery<HTMLElement> {\n\treturn $( document ).find( `[${ dataWidgetId }=\"${ widgetId }\"]` );\n}\n\nfunction getQueryItemById( widgetId: string, queryId: string|number ): JQuery<HTMLElement> {\n\tconst widget = getWidgetWrapperById( widgetId );\n\treturn $( widget ).find( `[${ dataQueryId }=\"${ queryId }\"]` );\n}\n\nfunction getQueriesInputValues( widget: JQuery<HTMLElement> ): Array<string> {\n\tconst queryInput = widget.find( queriesInputSelector );\n\tlet queries = String( queryInput.val() ).split( ';' );\n\tqueries = queries.filter( isNonEmptyString );\n\n\treturn queries;\n\n\tfunction isNonEmptyString( elem: string ): boolean {\n\t\treturn Boolean( elem );\n\t}\n}\n\nfunction setQueriesInputValues( widgetId: string, queries: Array<string> ): void {\n\tconst widget = getWidgetWrapperById( widgetId );\n\tconst input = widget.find( queriesInputSelector );\n\tconst value = queries.join( ';' );\n\tinput.val( value );\n}\n\n// =============================================================================\n// jQuery sorting and collapsing.\n\n$( document ).on( 'click', initializeAllQueriesSorting );\n\nfunction initializeAllQueriesSorting(): void {\n\twidgets.each( function() {\n\t\tinitializeWidgetSorting( $( this ) );\n\t} );\n}\n\nfunction initializeWidgetSorting( widget: JQuery<HTMLElement> ) {\n\tconst queriesList = widget.find( queriesListSelector );\n\tqueriesList.sortable( {\n\t\tupdate: handleSortingChange,\n\t} );\n}\n\nfunction handleSortingChange(): void {\n\tconst widgetId = getClosestWidgetId( this );\n\tupdateQueriesInput( widgetId );\n}\n\n// =============================================================================\n// jQuery collapsing.\n\n// todo: add a cache for collapsed to be as before when they update.\n\n$( makeAllQueriesCollapsible );\n$( document ).on( 'twrp-query-list-added widget-updated widget-added', handleQueryModifiedMakeCollapsible );\n\nfunction handleQueryModifiedMakeCollapsible( event, widgetId: string, queryId: string ) {\n\tif ( event.type === 'twrp-query-list-added' ) {\n\t\tmakeQueryCollapsible( widgetId, queryId );\n\t} else {\n\t\tmakeAllQueriesCollapsible();\n\t}\n}\n\nfunction makeAllQueriesCollapsible() {\n\tupdateWidgetsList();\n\twidgets.each( function() {\n\t\tconst widgetId = $( this ).attr( dataWidgetId );\n\t\tconst queryItems = $( this ).find( `[${ dataQueryId }]` );\n\t\tqueryItems.each( function() {\n\t\t\tconst queryId = $( this ).attr( dataQueryId );\n\t\t\tmakeQueryCollapsible( widgetId, queryId );\n\t\t} );\n\t} );\n}\n\nfunction makeQueryCollapsible( widgetId: string, queryId: string ): void {\n\tconst query = getQueryItemById( widgetId, queryId );\n\tconst accordionInstance = query.accordion( 'instance' );\n\tif ( accordionInstance ) {\n\t\tquery.accordion( 'refresh' );\n\t} else {\n\t\tquery.accordion( {\n\t\t\tcollapsible: true,\n\t\t\tactive: false,\n\t\t\theightStyle: 'content',\n\t\t} );\n\t}\n}\n\n// =============================================================================\n// Load article blocks settings on the fly.\n\n$( document ).on( 'change', selectArticleBlockSelector, handleArticleBlockChanged );\n\nasync function handleArticleBlockChanged() {\n\tconst widgetId = getClosestWidgetId( $( this ) );\n\tconst queryId = getClosestQueryId( $( this ) );\n\tconst artblockId = String( $( this ).val() );\n\tconst artblockSettingsHTML = await getArticleBlockSettings( widgetId, queryId, artblockId );\n\tinsertArticleBlock( widgetId, queryId, artblockSettingsHTML );\n}\n\nfunction getArticleBlockSettings( widgetId: string, queryId: string|number, artblockId: string|number ) {\n\tif ( hasArticleBlockInCache( widgetId, queryId, artblockId ) ) {\n\t\treturn getArticleBlockFromCache( widgetId, queryId, artblockId );\n\t}\n\n\treturn $.ajax( {\n\t\turl: ajaxurl,\n\t\tmethod: 'POST',\n\t\tdata: {\n\t\t\taction: 'twrp_widget_create_artblock_settings',\n\t\t\tartblock_id: artblockId,\n\t\t\twidget_id: widgetId,\n\t\t\tquery_id: queryId,\n\t\t},\n\t} );\n}\n\nfunction insertArticleBlock( widgetId: string, queryId: string|number, html: string ) {\n\tconst queryItem = getQueryItemById( widgetId, queryId );\n\tconst artblockSettingsWrapper = queryItem.find( artblockSettingsWrapperSelector );\n\tconst artblockContainer = queryItem.find( '.twrp-widget-form__article-block-settings-container' );\n\tartblockSettingsWrapper.detach();\n\taddArticleBlockToCache( widgetId, queryId, artblockSettingsWrapper );\n\tartblockContainer.append( html );\n}\n\n// ==========================\n// Cache Article Blocks\n\n/**\n * An array that contains all the article blocks retrieved and detached.\n * When a user choose to reselect a previously selected and modified article\n * block, the settings will not be fetched again from the server and the\n * modifications will remain.\n */\nconst articleBlocksCache = Array();\n\n/**\n * Add the article block to the cache array.\n */\nfunction addArticleBlockToCache( widgetId: string, queryId: string|number, artblockWrapper: JQuery<HTMLElement> ): void {\n\tconst artblockId = artblockWrapper.attr( dataArtblockId );\n\n\tif ( ( ! widgetId ) || ( ! queryId ) || ( ! artblockId ) ) {\n\t\treturn;\n\t}\n\n\tif ( ! articleBlocksCache[ widgetId ] ) {\n\t\tarticleBlocksCache[ widgetId ] = [];\n\t}\n\tif ( ! articleBlocksCache[ widgetId ][ queryId ] ) {\n\t\tarticleBlocksCache[ widgetId ][ queryId ] = [];\n\t}\n\n\tarticleBlocksCache[ widgetId ][ queryId ][ artblockId ] = artblockWrapper;\n}\n\n/**\n * Get an article block from cache. Or false if the article block is not in cache.\n */\nfunction getArticleBlockFromCache( widgetId: string, queryId: string|number, $artblockId: string|number ): JQuery<HTMLElement>|false {\n\tif ( hasArticleBlockInCache( widgetId, queryId, $artblockId ) ) {\n\t\treturn articleBlocksCache[ widgetId ][ queryId ][ $artblockId ];\n\t}\n\treturn false;\n}\n\n/**\n * Whether or not an article block was already fetched and put in cache.\n */\nfunction hasArticleBlockInCache( widgetId: string, queryId: string|number, $artblockId: string|number ): boolean {\n\tif ( ! articleBlocksCache[ widgetId ] ) {\n\t\treturn false;\n\t}\n\n\tif ( ! articleBlocksCache[ widgetId ][ queryId ] ) {\n\t\treturn false;\n\t}\n\n\tif ( ! articleBlocksCache[ widgetId ][ queryId ][ $artblockId ] ) {\n\t\treturn false;\n\t}\n\n\tconst storedArtblockId = articleBlocksCache[ widgetId ][ queryId ][ $artblockId ].attr( dataArtblockId );\n\n\tif ( ! ( storedArtblockId === $artblockId ) ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n"]}